<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Recipes with Angular.js</title>
<link href="stylesheet.css" type="text/css" rel="stylesheet" />
</head>
<body>
<div id="leanpub-main">

<!-- begin mainmatter -->
<h2 id="preface">Preface</h2>

<h3 id="introduction">Introduction</h3>
<p>Angular.js is an open-source Javascript MVC (Model-View-Controller) framework developed by Google. It gives Javascript developers a highly structured approach to developing rich browser-based applications which leads to very high productivity.</p>

<p>If you are using Angular.js, or considering it, this cookbook provides easy to follow recipes for issues you are likely to face. Each recipe solves a specific problem and provides a solution and in-depth discussion of it.</p>

<h3 id="code-examples">Code Examples</h3>
<p>All code examples in this book can be found on <a href="http://github.com/fdietz/recipes-with-angular-js-examples">Github</a>.</p>

<h3 id="how-to-contact-me">How to contact me</h3>
<p>If you have questions or comments please get in touch with:</p>

<p>Frederik Dietz (fdietz@gmail.com)</p>

<h3 id="acknowledgements">Acknowledgements</h3>
<p>Thanks go to John Lindquist for his excellent <a href="http://www.youtube.com/user/johnlindquist/videos?query=angular">Angular.js screencasts</a> and his project <a href="http://egghead.io/">Egghead IO</a>, Lukas Ruebbelke for his awesome <a href="http://www.youtube.com/user/simpulton/videos?flow=grid&amp;view=0">videos</a></p>

<p>TODO: Thanks for reviewing the book!</p>

<h2 id="an-introduction-to-angularjs">An Introduction to Angular.js</h2>

<h3 id="including-the-angularjs-library-code-in-an-html-page">Including the Angular.js library Code in an HTML page</h3>

<h4 id="problem">Problem</h4>
<p>You want to use Angular.js on a web page.</p>

<h4 id="solution">Solution</h4>
<p>In order to get your first Angular.js app up and running you need to include the Angular Javascript file via <code>script</code> tag and make use of the <code>ng-app</code> directive.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;html&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;head&gt;</code>
<code class="lineno">3</code>     <code class="nt">&lt;script</code> <code class="na">src=</code><code class="s">&quot;http://ajax.googleapis.com/ajax/libs/angularjs/1.0.4/angul\</code>
<code class="lineno">4</code> <code class="s">ar.js&quot;</code><code class="nt">&gt;&lt;/script&gt;</code>
<code class="lineno">5</code>   <code class="nt">&lt;/head&gt;</code>
<code class="lineno">6</code>   <code class="nt">&lt;body</code> <code class="err">ng-app</code><code class="nt">&gt;</code>
<code class="lineno">7</code>     <code class="nt">&lt;p&gt;</code>This is your first angular expression: {{ 1 + 2 }}<code class="nt">&lt;/p&gt;</code>
<code class="lineno">8</code>   <code class="nt">&lt;/body&gt;</code>
<code class="lineno">9</code> <code class="nt">&lt;/html&gt;</code>
</pre></div>

</div>

<div class="tip sidebarish">
  <hr />
  <p><img class="sidebar-image" src="images/leanpub_tip.png" alt="tip" />Tip: You can checkout a complete example on <a href="http://github.com/fdietz/recipes-with-angular-js-examples/chapter1/recipe1">github</a>.</p>

  <hr />
</div>

<h4 id="discussion">Discussion</h4>
<p>Adding the <code>ng-app</code> directive tells Angular to kick in its magic. The expression <code>{{ 1 + 2 }}</code> is evaluated by Angular and the result <code>3</code> is rendered. Note, that removing <code>ng-app</code> will result in the browser to render the expression as is instead of evaluating it. Play around with the expression! You can for example concatenate Strings and invert or combine Boolean values.</p>

<p>For Brevity reasons we skip the boilerplate code in the following recipes.</p>

<h3 id="binding-a-text-input-to-an-expression">Binding a Text Input to an Expression</h3>

<h4 id="problem-1">Problem</h4>
<p>You want user input to be used in another part of your HTML page.</p>

<h4 id="solution-1">Solution</h4>
<p>Use Angulars <code>ng-model</code> directive to bind the text input to the expression.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> Enter your name: <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">&quot;text&quot;</code> <code class="na">ng-model=</code><code class="s">&quot;name&quot;</code><code class="nt">&gt;&lt;/input&gt;</code>
<code class="lineno">2</code> <code class="nt">&lt;p&gt;</code>Hello {{name}}!<code class="nt">&lt;/p&gt;</code>
</pre></div>

</div>

<h4 id="discussion-1">Discussion</h4>
<p>Assigning &ldquo;name&rdquo; to the <code>ng-model</code> attribute and using the name variable in an expression will keep both in sync automatically. Typing in the text input will automatically reflect these changes in the paragraph element below.</p>

<p>Consider how you would implement this traditionally using jQuery:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;html&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;head&gt;</code>
<code class="lineno"> 3</code>     <code class="nt">&lt;script</code> <code class="na">src=</code><code class="s">&quot;http://code.jquery.com/jquery.min.js&quot;</code><code class="nt">&gt;&lt;/script&gt;</code>
<code class="lineno"> 4</code>   <code class="nt">&lt;/head&gt;</code>
<code class="lineno"> 5</code>   <code class="nt">&lt;body&gt;</code>
<code class="lineno"> 6</code>     Enter your name: <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">&quot;text&quot;</code><code class="nt">&gt;&lt;/input&gt;</code>
<code class="lineno"> 7</code>     <code class="nt">&lt;p</code> <code class="na">id=</code><code class="s">&quot;name&quot;</code><code class="nt">&gt;&lt;/p&gt;</code>
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code>     <code class="nt">&lt;script&gt;</code>
<code class="lineno">10</code>       $(document).ready(function() {
<code class="lineno">11</code>         $(&quot;input&quot;).keypress(function() {
<code class="lineno">12</code>           $(&quot;#name&quot;).text($(this).val());
<code class="lineno">13</code>         });
<code class="lineno">14</code>       });
<code class="lineno">15</code>     <code class="nt">&lt;/script&gt;</code>
<code class="lineno">16</code> 
<code class="lineno">17</code>   <code class="nt">&lt;/body&gt;</code>
<code class="lineno">18</code> <code class="nt">&lt;/html&gt;</code>
</pre></div>

</div>

<p>On document ready we bind to the keypress event in the text input and replace the text in the paragraph in the callback function. Using jQuery you need to deal with document ready callbacks, element selection, event binding and the context of this. Quite a lot of concepts to swallow and lines of code to maintain!</p>

<h3 id="converting-expression-output-with-filters">Converting Expression Output with Filters</h3>

<h4 id="problem-2">Problem</h4>
<p>When presenting data to the user, you might need to convert the data to a more user-friendly format. In our case we want to uppercase the <code>name</code> value from the previous recipe in the expression.</p>

<h4 id="solution-2">Solution</h4>
<p>Use the <code>uppercase</code> Angular filter.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> Enter your name: <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">&quot;text&quot;</code> <code class="na">ng-model=</code><code class="s">&quot;name&quot;</code><code class="nt">&gt;&lt;/input&gt;</code>
<code class="lineno">2</code> <code class="nt">&lt;p&gt;</code>Hello {{name | uppercase }}!<code class="nt">&lt;/p&gt;</code>
</pre></div>

</div>

<h4 id="discussion-2">Discussion</h4>
<p>Angular uses the <code>|</code> (pipe) character to combine filters with variables in expressions. When evaluating the expression, the name variable is passed to the uppercase filter. This is similar to working with the Unix bash pipe symbol where an input can be transformed by another program. Also try the <code>lowercase</code> filter!</p>

<h3 id="responding-to-click-events-using-controllers">Responding to Click Events using Controllers</h3>

<h4 id="problem-3">Problem</h4>
<p>You want to hide an HTML element on button click.</p>

<h4 id="solution-3">Solution</h4>
<p>Use the <code>ng-hide</code> directive in conjunction with a controller to change the visibility status on button click.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;html&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;head&gt;</code>
<code class="lineno"> 3</code>     <code class="nt">&lt;script</code> <code class="na">src=</code><code class="s">&quot;js/angular.js&quot;</code><code class="nt">&gt;&lt;/script&gt;</code>
<code class="lineno"> 4</code>     <code class="nt">&lt;script</code> <code class="na">src=</code><code class="s">&quot;js/app.js&quot;</code><code class="nt">&gt;&lt;/script&gt;</code>
<code class="lineno"> 5</code>     <code class="nt">&lt;link</code> <code class="na">rel=</code><code class="s">&quot;stylesheet&quot;</code> <code class="na">href=</code><code class="s">&quot;css/bootstrap.css&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 6</code>   <code class="nt">&lt;/head&gt;</code>
<code class="lineno"> 7</code>   <code class="nt">&lt;body</code> <code class="err">ng-app</code><code class="nt">&gt;</code>
<code class="lineno"> 8</code>     <code class="nt">&lt;div</code> <code class="na">ng-controller=</code><code class="s">&quot;MyCtrl&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 9</code>       <code class="nt">&lt;button</code> <code class="na">ng-click=</code><code class="s">&quot;toggle()&quot;</code><code class="nt">&gt;</code>Toggle<code class="nt">&lt;/button&gt;</code>
<code class="lineno">10</code>       <code class="nt">&lt;p</code> <code class="na">ng-show=</code><code class="s">&quot;isVisible()&quot;</code><code class="nt">&gt;</code>Hello World!<code class="nt">&lt;/p&gt;</code>
<code class="lineno">11</code>       <code class="nt">&lt;p&gt;</code>Debug Scope: visible = {{visible}}<code class="nt">&lt;/p&gt;</code>
<code class="lineno">12</code>     <code class="nt">&lt;/div&gt;</code>
<code class="lineno">13</code>   <code class="nt">&lt;/body&gt;</code>
<code class="lineno">14</code> <code class="nt">&lt;/html&gt;</code>
</pre></div>

</div>

<p>And the controller in <code>js/app.js</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="k">function</code><code class="w"> </code><code class="nf">MyCtrl</code><code class="p">(</code>$scope<code class="p">)</code><code class="w"> </code><code class="p">{</code>
<code class="lineno"> 2</code>   $<code class="n">scope</code><code class="p">.</code><code class="n">visible</code> <code class="p">=</code> <code class="n">true</code><code class="p">;</code>
<code class="lineno"> 3</code> 
<code class="lineno"> 4</code>   $<code class="n">scope</code><code class="p">.</code><code class="n">toggle</code> <code class="p">=</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno"> 5</code>     $<code class="n">scope</code><code class="p">.</code><code class="n">visible</code> <code class="p">=</code> !$<code class="n">scope</code><code class="p">.</code><code class="n">visible</code><code class="p">;</code>
<code class="lineno"> 6</code>   <code class="p">};</code>
<code class="lineno"> 7</code> 
<code class="lineno"> 8</code>   $<code class="n">scope</code><code class="p">.</code><code class="n">isVisible</code> <code class="p">=</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno"> 9</code>     <code class="k">return</code> $<code class="n">scope</code><code class="p">.</code><code class="n">visible</code> <code class="o">==</code><code class="p">=</code> <code class="n">true</code><code class="p">;</code>
<code class="lineno">10</code>   <code class="p">};</code>
<code class="lineno">11</code> <code class="p">}</code>
</pre></div>

</div>

<h4 id="discussion-3">Discussion</h4>
<p>Using the <code>ng-controller</code> directive we bind the <code>div</code> element including its children to the context of the <code>MyCtrl</code> Controller. The <code>ng-click</code> directive will call the <code>toggle()</code> function of the Controller on button click. The Controller implementation defaults the <code>visible</code> attribute to true and toggles its boolean state in the <code>toggle</code> function. The <code>ng-show</code> directive calls the <code>isVisible()</code> function to retrieve the boolean state. Note, that you could also use the <code>visible</code> attribute directly if you don&rsquo;t need to encapsulate your business logic.</p>

<h3 id="creating-custom-html-elements-with-directives">Creating Custom HTML elements with Directives</h3>

<h4 id="problem-4">Problem</h4>
<p>You want to render an HTML snippet as a reusable custom HTML element.</p>

<h4 id="solution-4">Solution</h4>
<p>Create a custom Directive which renders your Hello World snippet.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;hello-world/&gt;</code>
<code class="lineno">3</code> <code class="nt">&lt;/body&gt;</code>
</pre></div>

</div>

<p>The directive implementation:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno">2</code> 
<code class="lineno">3</code> app.directive(&quot;helloWorld&quot;, function() {
<code class="lineno">4</code>   return {
<code class="lineno">5</code>     restrict: &quot;E&quot;,
<code class="lineno">6</code>     template: &#39;<code class="nt">&lt;span&gt;</code>Hello World<code class="nt">&lt;/span&gt;</code>&#39;
<code class="lineno">7</code>   };
<code class="lineno">8</code> });
</pre></div>

</div>

<h4 id="discussion-4">Discussion</h4>
<p>We ignore the module creation for a later recipe for now. The browser will render the <code>span</code> element as defined in the directive. Note, that it does not replace the <code>hello-world</code> element, but instead inserts the <code>span</code> as a child. If you want to replace the content completely you need to return an additional attribute <code>replace</code> set to true:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> app.directive(&quot;helloWorld&quot;, function() {
<code class="lineno">2</code>   return {
<code class="lineno">3</code>     restrict: &quot;E&quot;,
<code class="lineno">4</code>     replace: true,
<code class="lineno">5</code>     template: &#39;<code class="nt">&lt;span&gt;</code>Hello World<code class="nt">&lt;/span&gt;</code>&#39;
<code class="lineno">6</code>   };
<code class="lineno">7</code> });
</pre></div>

</div>

<p>Now the <code>hello-world</code> element is not rendered at all and replaced with the <code>span</code> element.</p>

<p>Also note the <code>restrict</code> attribute is set to <code>E</code> which means the directive can be used only as an HTML element. A full discussion will follow in a later chapter.</p>

<h2 id="controllers">Controllers</h2>
<p>Controllers in Angular handle view behaviour, for example the user clicking a button or entering some text in a form. What should happen next is implemented in a Controller. As a general rule a Controller should not reference the DOM directly. This dramatically simplifies unit testing Controllers.</p>

<h3 id="assigning-a-default-value-to-a-model">Assigning a Default Value to a Model</h3>

<h4 id="problem-5">Problem</h4>
<p>You want to assign a default value to the scope in the controllers context.</p>

<h4 id="solution-5">Solution</h4>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;div</code> <code class="na">ng-controller=</code><code class="s">&quot;MyCtrl&quot;</code><code class="nt">&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;p&gt;</code><code class="err">{{</code>value}}<code class="nt">&lt;/p&gt;</code>
<code class="lineno">3</code> <code class="nt">&lt;/div&gt;</code>
<code class="lineno">4</code> 
<code class="lineno">5</code> var MyCtrl = function(<code class="p">$</code><code class="nv">scope</code>) <code class="err">{</code>
<code class="lineno">6</code>   <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">value</code> = &quot;some value&quot;;
<code class="lineno">7</code> };
</pre></div>

</div>

<h4 id="discussion-5">Discussion</h4>
<p>Depending on where you use the ng-controller directive, you define its assigned scope. The scope is hierachical and follows the DOM nodes hierarchy. In our example the value expression is correctly evaluated to <code>some value</code>, since value is set in the <code>MyCtrl</code> controller. Note, that this would not work if the value expression is moved outside the controllers scope:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;p&gt;</code>{{value}}<code class="nt">&lt;/p&gt;</code>
<code class="lineno">2</code> 
<code class="lineno">3</code> <code class="nt">&lt;div</code> <code class="na">ng-controller=</code><code class="s">&quot;MyCtrl&quot;</code><code class="nt">&gt;</code>
<code class="lineno">4</code> <code class="nt">&lt;/div&gt;</code>
</pre></div>

</div>

<p>In this case <code>{{value}}</code> will simply be not rendered at all.</p>

<h3 id="changing-a-model-value-with-a-controller-function">Changing a Model Value with a Controller Function</h3>

<h4 id="problem-6">Problem</h4>
<p>You want to increment a model value by 1.</p>

<h4 id="solution-6">Solution</h4>
<p>Implement an increment function which changes the scope.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;div</code> <code class="na">ng-controller=</code><code class="s">&quot;MyCtrl&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;p</code> <code class="na">ng-init=</code><code class="s">&quot;incrementValue(5)&quot;</code><code class="nt">&gt;</code><code class="err">{{</code>value}}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 3</code> <code class="nt">&lt;/div&gt;</code>
<code class="lineno"> 4</code> 
<code class="lineno"> 5</code> function MyCtrl(<code class="p">$</code><code class="nv">scope</code>) <code class="err">{</code>
<code class="lineno"> 6</code>   <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">value</code> = 1;
<code class="lineno"> 7</code> 
<code class="lineno"> 8</code>   <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">incrementValue</code> = function(value) <code class="err">{</code>
<code class="lineno"> 9</code>     <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">value</code> += 1;
<code class="lineno">10</code>   };
<code class="lineno">11</code> }
</pre></div>

</div>

<h4 id="discussion-6">Discussion</h4>
<p>The <code>ng-init</code> directive is executed on page load and calls the function defined in <code>MyCtrl</code>.</p>

<h3 id="encapsulating-a-model-value-with-a-controller-function">Encapsulating a Model Value with a Controller Function</h3>

<h4 id="problem-7">Problem</h4>
<p>You want to retrieve a model via function (instead of directly accessing the scope from the template) which further changes the model value.</p>

<h4 id="solution-7">Solution</h4>
<p>Define a getter function which returns the model value.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;div</code> <code class="na">ng-controller=</code><code class="s">&quot;MyCtrl&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;p&gt;</code><code class="err">{{</code>getIncrementedValue()}}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 3</code> <code class="nt">&lt;/div&gt;</code>
<code class="lineno"> 4</code> 
<code class="lineno"> 5</code> function MyCtrl(<code class="p">$</code><code class="nv">scope</code>) <code class="err">{</code>
<code class="lineno"> 6</code>   <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">value</code> = 1;
<code class="lineno"> 7</code> 
<code class="lineno"> 8</code>   <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">getIncrementedValue</code> = function() <code class="err">{</code>
<code class="lineno"> 9</code>     return <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">value</code> + 1;
<code class="lineno">10</code>   };
<code class="lineno">11</code> }
</pre></div>

</div>

<h4 id="discussion-7">Discussion</h4>
<p><code>MyCtrl</code> defines the <code>getIncrementedValue</code> function which uses the current value and returns it incremented by one. One could argue that depending on the use case it would make more sense to use a filter. But, there are use cases specific to the controllers behaviour which you might not want to use a generic directive.</p>

<h3 id="responding-to-scope-changes">Responding to Scope Changes</h3>

<h4 id="problem-8">Problem</h4>
<p>You want to react on a model change to trigger some further actions. In our example we simple want to set another model value depending on the value we are listing on.</p>

<h4 id="solution-8">Solution</h4>
<p>Use the <code>$watch</code> function in your controller.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;div</code> <code class="na">ng-controller=</code><code class="s">&quot;MyCtrl&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">&quot;text&quot;</code> <code class="na">ng-model=</code><code class="s">&quot;name&quot;</code> <code class="na">placeholder=</code><code class="s">&quot;Enter your name&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 3</code>   <code class="nt">&lt;p&gt;</code><code class="err">{{</code>greeting}}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 4</code> <code class="nt">&lt;/div&gt;</code>
<code class="lineno"> 5</code> 
<code class="lineno"> 6</code> function MyCtrl(<code class="p">$</code><code class="nv">scope</code>) <code class="err">{</code>
<code class="lineno"> 7</code>   <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">name</code> = &quot;&quot;;
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code>   <code class="p">$</code><code class="nv">scope</code>.<code class="p">$</code><code class="nv">watch</code><code class="p">(</code><code class="s2">&quot;name&quot;</code><code class="p">,</code> <code class="err">function</code><code class="p">(</code><code class="err">newValue</code><code class="p">,</code> <code class="err">oldValue</code><code class="p">)</code> <code class="err">{</code>
<code class="lineno">10</code>     <code class="err">if</code> <code class="p">($</code><code class="nv">scope</code><code class="p">.</code><code class="nv">name</code><code class="p">.</code><code class="nv">length</code> <code class="err">&gt;</code> <code class="m">0</code><code class="p">)</code> <code class="err">{</code>
<code class="lineno">11</code>       <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">greeting</code> <code class="err">=</code> <code class="s2">&quot;Greetings &quot;</code> <code class="err">+</code> <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">name</code><code class="err">;</code>
<code class="lineno">12</code>     <code class="err">}</code>
<code class="lineno">13</code>   <code class="err">}</code><code class="p">)</code>;
<code class="lineno">14</code> }
</pre></div>

</div>

<p>The value <code>greeting</code> will be changed whenever there&rsquo;s a change on the <code>name</code> model and the value is not blank.</p>

<h4 id="discussion-8">Discussion</h4>
<p>The first argument <code>name</code> of the <code>$watch</code> function is actually an Angular expression, so you can use more complicated expressions (for example: <code>[value1, value2] | json</code>). Alternatively, you can also use a javascript function:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> $<code class="n">scope</code><code class="p">.</code>$<code class="n">watch</code><code class="p">(</code><code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno">2</code>   <code class="k">return</code> $<code class="n">scope</code><code class="p">.</code><code class="n">name</code><code class="p">;</code>
<code class="lineno">3</code> <code class="p">},</code> <code class="k">function</code><code class="p">(</code><code class="n">newValue</code><code class="p">,</code> <code class="n">oldValue</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">4</code>   <code class="n">console</code><code class="p">.</code><code class="nb">log</code><code class="p">(</code>&quot;<code class="n">change</code> <code class="n">detected</code><code class="p">:</code> &quot; <code class="o">+</code> <code class="n">newValue</code><code class="p">)</code>
<code class="lineno">5</code> <code class="p">});</code>
</pre></div>

</div>

<p>Note, that you need to return a String in the watcher function. The second function will only be called if the returned String changed compared to the previous execution. Internally this uses <code>angular.equals</code> to determine equality.</p>

<h3 id="sharing-code-between-controllers-using-services">Sharing Code Between Controllers using Services</h3>
<p>TODO</p>

<h3 id="testing-controllers">Testing Controllers</h3>

<h4 id="problem-9">Problem</h4>
<p>You want to unit test your business logic.</p>

<h4 id="solution-9">Solution</h4>
<p>Implement a unit test using <a href="http://pivotal.github.com/jasmine/">Jasmine</a> and the <a href="https://github.com/angular/angular-seed">angular-seed</a> project. Following our previous <code>$watch</code> recipe this is how our spec would look like.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="n">describe</code><code class="p">(</code><code class="s">&#39;MyCtrl&#39;</code><code class="p">,</code> <code class="k">function</code><code class="p">(){</code>
<code class="lineno"> 2</code>   <code class="n">var</code> <code class="n">scope</code><code class="p">,</code> <code class="n">ctrl</code><code class="p">;</code>
<code class="lineno"> 3</code> 
<code class="lineno"> 4</code>   <code class="n">beforeEach</code><code class="p">(</code><code class="n">inject</code><code class="p">(</code><code class="k">function</code><code class="p">(</code>$<code class="n">injector</code><code class="p">,</code> $<code class="n">controller</code><code class="p">,</code> $<code class="n">rootScope</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 5</code>     <code class="n">scope</code> <code class="p">=</code> $<code class="n">rootScope</code><code class="p">.</code>$<code class="n">new</code><code class="p">();</code>
<code class="lineno"> 6</code>     <code class="n">ctrl</code> <code class="p">=</code> $<code class="n">controller</code><code class="p">(</code><code class="n">MyCtrl</code><code class="p">,</code> <code class="p">{</code> $<code class="n">scope</code><code class="p">:</code> <code class="n">scope</code> <code class="p">});</code>
<code class="lineno"> 7</code>   <code class="p">}));</code>
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code>   <code class="n">it</code><code class="p">(</code><code class="s">&#39;should change greeting value if name value is changed&#39;</code><code class="p">,</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno">10</code>     <code class="n">scope</code><code class="p">.</code><code class="n">name</code> <code class="p">=</code> &quot;<code class="n">Frederik</code>&quot;<code class="p">;</code>
<code class="lineno">11</code>     <code class="n">scope</code><code class="p">.</code>$<code class="n">digest</code><code class="p">();</code>
<code class="lineno">12</code>     <code class="n">expect</code><code class="p">(</code><code class="n">scope</code><code class="p">.</code><code class="n">greeting</code><code class="p">).</code><code class="n">toBe</code><code class="p">(</code>&quot;<code class="n">Greetings</code> <code class="n">Frederik</code>&quot;<code class="p">);</code>
<code class="lineno">13</code>   <code class="p">});</code>
<code class="lineno">14</code> <code class="p">});</code>
</pre></div>

</div>

<h4 id="discussion-9">Discussion</h4>
<p>Jasmine specs use <code>describe</code> and <code>it</code> functions to group specs and <code>beforeEach</code> and <code>afterEach</code> to setup and teardown code. The actual expectation compares the greeting from the scope with our expectation <code>Greetings Frederik</code>.</p>

<p>The scope and controller initialization is a bit more involved. We use <code>inject</code> to initialize the scope and controller as closely as possible to how our code would behave at runtime too. We can&rsquo;t just initialize the scope as an javascript object <code>{}</code> since then we would not be able to call <code>$watch</code> on it.</p>

<p>The <code>$digest</code> call is required in order for another watch execution. We need to call <code>$digest</code> manually in our spec whereas at runtime Angular will do this for us automatically.</p>

<h2 id="directives">Directives</h2>
<p>Directives are one of the most powerful concepts in Angular since they let you invent new html syntax specific to your application. This allows you to create reusable components which encapsulate complex DOM structures, stylesheets and even behaviour.</p>

<h3 id="enablingdisabling-dom-elements-conditionally">Enabling/Disabling DOM Elements Conditionally</h3>

<h4 id="problem-10">Problem</h4>
<p>You want to disable a button depending on a checkbox state.</p>

<h4 id="solution-10">Solution</h4>
<p>Use the <code>ng-disabled</code> directive and bind its condition to the checkbox state.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;body</code> <code class="err">ng-app</code><code class="nt">&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;label&gt;&lt;input</code> <code class="na">type=</code><code class="s">&quot;checkbox&quot;</code> <code class="na">ng-model=</code><code class="s">&quot;checked&quot;</code><code class="nt">/&gt;</code>Toggle Button<code class="nt">&lt;/label&gt;</code>
<code class="lineno">3</code>   <code class="nt">&lt;button</code> <code class="na">ng-disabled=</code><code class="s">&quot;checked&quot;</code><code class="nt">&gt;</code>Press me<code class="nt">&lt;/button&gt;</code>
<code class="lineno">4</code> <code class="nt">&lt;/body&gt;</code>
</pre></div>

</div>

<h4 id="discussion-10">Discussion</h4>
<p>The <code>ng-disabled</code> directive is a direct translation from the disabled HTML attribute, without you needing to worry about browser incompatibilities. It is bound to the <code>checked</code> model using an attribute value as is the checkbox using the <code>ng-model</code> directive. In fact the <code>checked</code> attribute value is again an Angular expression. You could for example invert the logic and use <code>!checked</code> instead.</p>

<p>This is just one example of a directive shipped with Angular. There are many others as for example <code>ng-hide</code>, <code>ng-checked</code> or <code>ng-mouseenter</code> and I encourage you go through the <a href="http://docs.angularjs.org/api">API Reference</a> and explore all the directives Angular has to offer.</p>

<p>In the next recipes we will focus on implementing directives.</p>

<h3 id="changing-the-dom-in-response-to-user-actions">Changing the DOM in Response to User Actions</h3>

<h4 id="problem-11">Problem</h4>
<p>You want to change the CSS of an HTML element on a mouse click and encapsulate this behaviour in a reusable component.</p>

<h4 id="solution-11">Solution</h4>
<p>Implement a directive which defines a link function.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;my-widget&gt;</code>
<code class="lineno"> 3</code>     <code class="nt">&lt;p&gt;</code>Hello World<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 4</code>   <code class="nt">&lt;/my-widget&gt;</code>
<code class="lineno"> 5</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code> 
<code class="lineno"> 8</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 9</code> 
<code class="lineno">10</code> app.directive(&quot;myWidget&quot;, function() {
<code class="lineno">11</code>   var linkFunction = function(scope, element, attributes) {
<code class="lineno">12</code>     var paragraph = element.children()[0];
<code class="lineno">13</code>     $(paragraph).on(&quot;click&quot;, function() {
<code class="lineno">14</code>       $(this).css({ &quot;background-color&quot;: &quot;red&quot; });
<code class="lineno">15</code>     });
<code class="lineno">16</code>   };
<code class="lineno">17</code> 
<code class="lineno">18</code>   return {
<code class="lineno">19</code>     restrict: &quot;E&quot;,
<code class="lineno">20</code>     link: linkFunction
<code class="lineno">21</code>   };
<code class="lineno">22</code> });
</pre></div>

</div>

<p>When clicking on the paragraph the background color changes to red.</p>

<h4 id="discussion-11">Discussion</h4>
<p>In the HTML document we use the new directive as an HTML element <code>my-widget</code>, which can be found in the javascript code as <code>myWidget</code> again. The directive function returns a restriction and a link function.</p>

<p>The restriction means that this directive can only be used as an HTML element and not for example an HTML attribute. If you want to use it as an HTML attribute, change the <code>restrict</code> to return <code>A</code> instead. The usage would then have to be adapted to:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;div</code> <code class="err">my-widget</code><code class="nt">&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;p&gt;</code>Hello World<code class="nt">&lt;/p&gt;</code>
<code class="lineno">3</code> <code class="nt">&lt;/div&gt;</code>
</pre></div>

</div>

<p>Wether you use the attribute or element mechanism depends on your use case. Generally speaking one would use the element mechanism to define a custom reusable component. The attribute mechanism would be used whenever you want to &ldquo;configure&rdquo; some element or enhance it with more behaviour. Other options are using the directive as a class attribute or a comment.</p>

<p>The link function is much more interesting since it defines the actual behaviour. The scope, the actual HTML element <code>my-widget</code> and the html attributes are passed as params. Note, that this has nothing to do with Angulars dependency injection mechanism. Ordering of the parameters is important!</p>

<p>First we select the paragraph element, which is a child of the <code>my-widget</code> element using Angulars <code>children()</code> function as defined by element. In the second step we use jQuery to bind to the click event and modify the css property on click. This is of special interest since we have a mixture of Angular element functions and jQuery here. In fact under the hood Angular will use jQuery in the <code>children()</code> function if its defined and will fall back to jqLite (shipped with Angular) otherwise. You can find all supported methods in the <a href="http://docs.angularjs.org/api/angular.element">API Reference of element</a>.</p>

<p>Following a slightly changed version of the code using jQuery only:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">element</code><code class="p">.</code><code class="n">on</code><code class="p">(</code>&quot;<code class="n">click</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno">2</code>   $<code class="p">(</code><code class="n">this</code><code class="p">).</code><code class="n">css</code><code class="p">({</code> &quot;<code class="n">background</code><code class="o">-</code><code class="n">color</code>&quot;<code class="p">:</code> &quot;<code class="n">red</code>&quot; <code class="p">});</code>
<code class="lineno">3</code> <code class="p">});</code>
</pre></div>

</div>

<p>In this case <code>element</code> is alreay an jQuery element and we can directly use the on function.</p>

<p>The <code>directive</code> method expects a function which can be used for initialization and injection of dependencies.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">app</code><code class="p">.</code><code class="n">directive</code><code class="p">(</code>&quot;<code class="n">myWidget</code>&quot;<code class="p">,</code> <code class="k">function</code> <code class="n">factory</code><code class="p">(</code><code class="n">injectables</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">2</code>   <code class="o">//</code> <code class="p">...</code>
<code class="lineno">3</code> <code class="p">}</code>
</pre></div>

</div>

<h3 id="rendering-an-html-snippet-in-a-directive">Rendering an HTML Snippet in a Directive</h3>

<h4 id="problem-12">Problem</h4>
<p>You want to render an HTML snippet as a reusable component.</p>

<h4 id="solution-12">Solution</h4>
<p>Implement a directive and use the template attribute to define the HTML.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;my-widget/&gt;</code>
<code class="lineno"> 3</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 4</code> 
<code class="lineno"> 5</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code> app.directive(&quot;myWidget&quot;, function() {
<code class="lineno"> 8</code>   return {
<code class="lineno"> 9</code>     restrict: &quot;E&quot;,
<code class="lineno">10</code>     template: &quot;<code class="nt">&lt;p&gt;</code>Hello World<code class="nt">&lt;/p&gt;</code>&quot;
<code class="lineno">11</code>   };
<code class="lineno">12</code> });
</pre></div>

</div>

<h4 id="discussion-12">Discussion</h4>
<p>This will render the Hello World paragraph as a child node of your <code>my-widget</code> element. In case you want to replace the element entirely with the paragraph you have to additionally return the replace attribute:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> app.directive(&quot;myWidget&quot;, function() {
<code class="lineno">2</code>   return {
<code class="lineno">3</code>     restrict: &quot;E&quot;,
<code class="lineno">4</code>     replace: true,
<code class="lineno">5</code>     template: &quot;<code class="nt">&lt;p&gt;</code>Hello World<code class="nt">&lt;/p&gt;</code>&quot;
<code class="lineno">6</code>   };
<code class="lineno">7</code> });
</pre></div>

</div>

<p>Another option would be to use a file for the HTML snippet. In this case you need to use the templateUrl attribute, as for example:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">app</code><code class="p">.</code><code class="n">directive</code><code class="p">(</code>&quot;<code class="n">myWidget</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno">2</code>   <code class="k">return</code> <code class="p">{</code>
<code class="lineno">3</code>     <code class="n">restrict</code><code class="p">:</code> &quot;<code class="n">E</code>&quot;<code class="p">,</code>
<code class="lineno">4</code>     <code class="n">replace</code><code class="p">:</code> <code class="n">true</code><code class="p">,</code>
<code class="lineno">5</code>     <code class="n">templateUrl</code><code class="p">:</code> &quot;<code class="n">widget</code><code class="p">.</code><code class="n">html</code>&quot;
<code class="lineno">6</code>   <code class="p">};</code>
<code class="lineno">7</code> <code class="p">});</code>
</pre></div>

</div>

<p>The <code>widget.html</code> should reside in the same directory as the <code>index.html</code> file. This will only work if you use a web server to host the file. The example on Github uses angular-seed as bootstrap again.</p>

<h3 id="rendering-a-directives-dom-node-children">Rendering a Directive&rsquo;s DOM Node Children</h3>

<h4 id="problem-13">Problem</h4>
<p>Your widget uses the child nodes of the directive element to create a combined rendering.</p>

<h4 id="solution-13">Solution</h4>
<p>Use the <code>transclude</code> attribute together with the <code>ng-transclude</code> directive.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;my-widget&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;p&gt;</code>This is my paragraph text.<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 3</code> <code class="nt">&lt;/my-widget&gt;</code>
<code class="lineno"> 4</code> 
<code class="lineno"> 5</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code> app.directive(&quot;myWidget&quot;, function() {
<code class="lineno"> 8</code>   return {
<code class="lineno"> 9</code>     restrict: &quot;E&quot;,
<code class="lineno">10</code>     transclude: true,
<code class="lineno">11</code>     template: &quot;<code class="nt">&lt;div</code> <code class="err">ng-transclude</code><code class="nt">&gt;&lt;h3&gt;</code>Heading<code class="nt">&lt;/h3&gt;&lt;/div&gt;</code>&quot;
<code class="lineno">12</code>   };
<code class="lineno">13</code> });
</pre></div>

</div>

<p>This will render a <code>div</code> element containing a <code>h3</code> element and append the directives child node with the paragraph element below.</p>

<h4 id="discussion-13">Discussion</h4>
<p>In this context transclusion refers to the inclusion of a part of a document into another document by reference. The <code>ng-transclude</code> attribute should be placed depending on where you want your child nodes to be appended to.</p>

<h3 id="passing-configuration-params-using-html-attributes">Passing Configuration Params Using HTML Attributes</h3>

<h4 id="problem-14">Problem</h4>
<p>You want to pass a configuration param to change the rendered output.</p>

<h4 id="solution-14">Solution</h4>
<p>Use the attribute based directive and pass an attribute value for the configuration. The attribute is passed as a parameter to the link function.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;div</code> <code class="na">my-widget=</code><code class="s">&quot;Hello World&quot;</code><code class="nt">&gt;&lt;/div&gt;</code>
<code class="lineno"> 3</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 4</code> 
<code class="lineno"> 5</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code> app.directive(&quot;myWidget&quot;, function() {
<code class="lineno"> 8</code>   var linkFunction = function(scope, element, attributes) {
<code class="lineno"> 9</code>     scope.text = attributes[&quot;myWidget&quot;];
<code class="lineno">10</code>   };
<code class="lineno">11</code> 
<code class="lineno">12</code>   return {
<code class="lineno">13</code>     restrict: &quot;A&quot;,
<code class="lineno">14</code>     template: &quot;<code class="nt">&lt;p&gt;</code>{{text}}<code class="nt">&lt;/p&gt;</code>&quot;,
<code class="lineno">15</code>     link: linkFunction
<code class="lineno">16</code>   };
<code class="lineno">17</code> });
</pre></div>

</div>

<h4 id="discussion-14">Discussion</h4>
<p>The link function has access to the element and its attributes. It is therefore straight forward to set the scope to the text passed as the attributes value and use this in the template evaluation.</p>

<p>The scope context is important though. The <code>text</code> model we changed might be already defined in the parent scope and used in another place of your app. In order to isolate the context and thereby using it only locally inside of your directive we have to return an additional scope attribute.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> return {
<code class="lineno">2</code>   restrict: &quot;A&quot;,
<code class="lineno">3</code>   template: &quot;<code class="nt">&lt;p&gt;</code>{{text}}<code class="nt">&lt;/p&gt;</code>&quot;,
<code class="lineno">4</code>   link: linkFunction,
<code class="lineno">5</code>   scope: {}
<code class="lineno">6</code> };
</pre></div>

</div>

<p>In Angular this is called an isolate scope. It does not prototypically inherit from the parent scope and is especially useful when creating reusable components.</p>

<p>Lets look into another way of passing params to the directive, this time we define an HTML element <code>my-widget</code>.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;my-widget2</code> <code class="na">text=</code><code class="s">&quot;Hello World&quot;</code><code class="nt">&gt;&lt;/my-widget2&gt;</code>
<code class="lineno"> 2</code> 
<code class="lineno"> 3</code> app.directive(&quot;myWidget2&quot;, function() {
<code class="lineno"> 4</code>   return {
<code class="lineno"> 5</code>     restrict: &quot;E&quot;,
<code class="lineno"> 6</code>     template: &quot;<code class="nt">&lt;p&gt;</code>{{text}}<code class="nt">&lt;/p&gt;</code>&quot;,
<code class="lineno"> 7</code>     scope: {
<code class="lineno"> 8</code>       text: &quot;@text&quot;
<code class="lineno"> 9</code>     }
<code class="lineno">10</code>   };
<code class="lineno">11</code> });
</pre></div>

</div>

<p>The scope definition using <code>@text</code> is binding the text model to the directive&rsquo;s attribute. Note, that any changes on the parent scope <code>text</code> will change the local scope <code>text</code>, but not the other way around</p>

<p>If you want instead to have a bi-directional binding between the parent scope and the local scope, you should use the <code>=</code> equality character:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">scope</code><code class="p">:</code> <code class="p">{</code>
<code class="lineno">2</code>   <code class="n">text</code><code class="p">:</code> &quot;<code class="p">=</code><code class="n">text</code>&quot;
<code class="lineno">3</code> <code class="p">}</code>
</pre></div>

</div>

<p>Changes to the local scope will also change the parent scope.</p>

<p>Another possibility would be to pass an expression as a function to the directive using the <code>&amp;</code> character.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;my-widget-expr</code> <code class="na">fn=</code><code class="s">&quot;count = count + 1&quot;</code><code class="nt">&gt;&lt;/my-widget-expr&gt;</code>
<code class="lineno"> 2</code> 
<code class="lineno"> 3</code> app.directive(&quot;myWidgetExpr&quot;, function() {
<code class="lineno"> 4</code>   var linkFunction = function(scope, element, attributes) {
<code class="lineno"> 5</code>     scope.text = scope.fn({ count: 5 });
<code class="lineno"> 6</code>   };
<code class="lineno"> 7</code> 
<code class="lineno"> 8</code>   return {
<code class="lineno"> 9</code>     restrict: &quot;E&quot;,
<code class="lineno">10</code>     template: &quot;<code class="nt">&lt;p&gt;</code>{{text}}<code class="nt">&lt;/p&gt;</code>&quot;,
<code class="lineno">11</code>     link: linkFunction,
<code class="lineno">12</code>     scope: {
<code class="lineno">13</code>       fn: &quot;<code class="err">&amp;</code>fn&quot;
<code class="lineno">14</code>     }
<code class="lineno">15</code>   };
<code class="lineno">16</code> });
</pre></div>

</div>

<p>We pass the attribute <code>fn</code> to the directive and since the local scope defines <code>fn</code> accordingly we can call the function in the linkFunction and pass in the expression arguments as a hash.</p>

<h3 id="repeatedly-rendering-directives-dom-node-children">Repeatedly Rendering Directive&rsquo;s DOM Node Children</h3>

<h4 id="problem-15">Problem</h4>
<p>You want to render an html snippet repeatedly using the directives child nodes as the &ldquo;stamp&rdquo; content.</p>

<h4 id="solution-15">Solution</h4>
<p>Implement a compile function in your directive.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;repeat-ntimes</code> <code class="na">repeat=</code><code class="s">&quot;10&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;h1&gt;</code>Header 1<code class="nt">&lt;/h1&gt;</code>
<code class="lineno"> 3</code>   <code class="nt">&lt;p&gt;</code>This is the paragraph.<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 4</code> <code class="nt">&lt;/repeat-n-times&gt;</code>
<code class="lineno"> 5</code> 
<code class="lineno"> 6</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 7</code> 
<code class="lineno"> 8</code> app.directive(&quot;repeatNtimes&quot;, function() {
<code class="lineno"> 9</code>   return {
<code class="lineno">10</code>     restrict: &quot;E&quot;,
<code class="lineno">11</code>     compile: function(tElement, attrs) {
<code class="lineno">12</code>       var content = tElement.children();
<code class="lineno">13</code>       for (var i=1; i<code class="nt">&lt;attrs.repeat</code><code class="err">;</code> <code class="err">i++)</code> <code class="err">{</code>
<code class="lineno">14</code>         <code class="err">tElement.append(content.clone());</code>
<code class="lineno">15</code>       <code class="err">}</code>
<code class="lineno">16</code>     <code class="err">}</code>
<code class="lineno">17</code>   <code class="err">};</code>
<code class="lineno">18</code> <code class="err">});</code>
</pre></div>

</div>

<p>This will render the header and paragraph 10 times.</p>

<h4 id="discussion-15">Discussion</h4>
<p>The directive repeats the child nodes as often as configured in the <code>repeat</code> attribute. It works similarly to the <a href="http://docs.angularjs.org/api/ng.directive:ngRepeat">ng-repeat</a> directive. The implemention uses Angulars element methods to append the child nodes in a for loop.</p>

<p>Note, that the compile method only has access to the templates element (tElement) and template attributes. It has no access to the scope and you therefore also can&rsquo;t use <code>$watch</code> to add behaviour. This is in comparison to the link function which has access to the DOM &ldquo;instance&rdquo; (after the compile phase) and has access to the scope to add behaviour.</p>

<p>Use the compile function for template DOM manipulation only. Use the link function when you want to add behaviour.</p>

<p>Note, that you can use both compile and link function combined. In this case the compile function must return the link function. As an example you want to react to a click on the header:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="n">compile</code><code class="o">:</code> <code class="kd">function</code><code class="o">(</code><code class="n">tElement</code><code class="o">,</code> <code class="n">attrs</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 2</code>   <code class="n">var</code> <code class="n">content</code> <code class="o">=</code> <code class="n">tElement</code><code class="o">.</code><code class="na">children</code><code class="o">();</code>
<code class="lineno"> 3</code>   <code class="k">for</code> <code class="o">(</code><code class="n">var</code> <code class="n">i</code><code class="o">=</code><code class="mi">1</code><code class="o">;</code> <code class="n">i</code><code class="o">&lt;</code><code class="n">attrs</code><code class="o">.</code><code class="na">repeat</code><code class="o">;</code> <code class="n">i</code><code class="o">++)</code> <code class="o">{</code>
<code class="lineno"> 4</code>     <code class="n">tElement</code><code class="o">.</code><code class="na">append</code><code class="o">(</code><code class="n">content</code><code class="o">.</code><code class="na">clone</code><code class="o">());</code>
<code class="lineno"> 5</code>   <code class="o">}</code>
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code>   <code class="k">return</code> <code class="kd">function</code> <code class="o">(</code><code class="n">scope</code><code class="o">,</code> <code class="n">element</code><code class="o">,</code> <code class="n">attrs</code><code class="o">)</code> <code class="o">{</code>
<code class="lineno"> 8</code>     <code class="n">element</code><code class="o">.</code><code class="na">on</code><code class="o">(</code><code class="s2">&quot;click&quot;</code><code class="o">,</code> <code class="s2">&quot;h1&quot;</code><code class="o">,</code> <code class="kd">function</code><code class="o">()</code> <code class="o">{</code>
<code class="lineno"> 9</code>       <code class="n">$</code><code class="o">(</code><code class="k">this</code><code class="o">).</code><code class="n">css</code><code class="o">({</code> <code class="s2">&quot;background-color&quot;</code><code class="o">:</code> <code class="s2">&quot;red&quot;</code> <code class="o">});</code>
<code class="lineno">10</code>     <code class="o">});</code>
<code class="lineno">11</code>   <code class="o">};</code>
<code class="lineno">12</code> <code class="o">}</code>
</pre></div>

</div>

<h3 id="directive-to-directive-communication">Directive to Directive Communication</h3>

<h4 id="problem-16">Problem</h4>
<p>You want a directive to communicate with another directive and augment each other&rsquo;s behaviour using a well defined interface (API).</p>

<h4 id="solution-16">Solution</h4>
<p>Implement a directive with a controller function and a second directive which &ldquo;requires&rdquo; this controller.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;basket</code> <code class="err">apple</code> <code class="err">orange</code><code class="nt">&gt;</code>Roll over me and check the console!<code class="nt">&lt;/basket&gt;</code>
<code class="lineno"> 3</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 4</code> 
<code class="lineno"> 5</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code> app.directive(&quot;basket&quot;, function() <code class="err">{</code>
<code class="lineno"> 8</code>   return <code class="err">{</code>
<code class="lineno"> 9</code>     restrict: &quot;E&quot;,
<code class="lineno">10</code>     controller: function(<code class="p">$</code><code class="nv">scope</code>, <code class="p">$</code><code class="nv">element</code>, <code class="p">$</code><code class="nv">attrs</code>) <code class="err">{</code>
<code class="lineno">11</code>       <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">content</code> = [];
<code class="lineno">12</code> 
<code class="lineno">13</code>       this.addApple = function() <code class="err">{</code>
<code class="lineno">14</code>         <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">content</code><code class="p">.</code><code class="nv">push</code><code class="p">(</code><code class="s2">&quot;apple&quot;</code><code class="p">)</code>;
<code class="lineno">15</code>       };
<code class="lineno">16</code> 
<code class="lineno">17</code>       this.addOrange = function() <code class="err">{</code>
<code class="lineno">18</code>         <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">content</code><code class="p">.</code><code class="nv">push</code><code class="p">(</code><code class="s2">&quot;orange&quot;</code><code class="p">)</code>;
<code class="lineno">19</code>       };
<code class="lineno">20</code>     },
<code class="lineno">21</code>     link: function(scope, element) <code class="err">{</code>
<code class="lineno">22</code>       element.bind(&quot;mouseenter&quot;, function() <code class="err">{</code>
<code class="lineno">23</code>         console.log(scope.content);
<code class="lineno">24</code>       });
<code class="lineno">25</code>     }
<code class="lineno">26</code>   };
<code class="lineno">27</code> });
<code class="lineno">28</code> 
<code class="lineno">29</code> app.directive(&quot;apple&quot;, function() <code class="err">{</code>
<code class="lineno">30</code>   return <code class="err">{</code>
<code class="lineno">31</code>     require: &quot;basket&quot;,
<code class="lineno">32</code>     link: function(scope, element, attrs, basketCtrl) <code class="err">{</code>
<code class="lineno">33</code>       basketCtrl.addApple();
<code class="lineno">34</code>     }
<code class="lineno">35</code>   };
<code class="lineno">36</code> });
<code class="lineno">37</code> 
<code class="lineno">38</code> app.directive(&quot;orange&quot;, function() <code class="err">{</code>
<code class="lineno">39</code>   return <code class="err">{</code>
<code class="lineno">40</code>     require: &quot;basket&quot;,
<code class="lineno">41</code>     link: function(scope, element, attrs, basketCtrl) <code class="err">{</code>
<code class="lineno">42</code>       basketCtrl.addOrange();
<code class="lineno">43</code>     }
<code class="lineno">44</code>   };
<code class="lineno">45</code> });
</pre></div>

</div>

<p>If you hover with the mouse over the rendered text the console should print and the basket&rsquo;s content.</p>

<h4 id="discussion-16">Discussion</h4>
<p><code>Basket</code> is the example directive which demonstrates an API using the controller function, whereas the <code>apple</code> and <code>orange</code> directives augment the <code>Basket</code> directive. They both define a dependency to the <code>basket</code> controller with the <code>require</code> attribute. The link function then gets <code>basketCtrl</code> injected.</p>

<p>Note, how the <code>basket</code> directive is defined as an HTML element and the <code>apple</code> and <code>orange</code> directives are defined as HTML attributes (the default for directives). This demonstrates the typical use case of a reusable component augmented by other directives.</p>

<p>Now there might be other ways of passing data back and forth between directives - we have seen the different semantics of using the (isolated) context in directives in previous recipes - but what&rsquo;s especially great about the controller is the clear API contract it lets you define.</p>

<h3 id="testing-directives">Testing Directives</h3>

<h4 id="problem-17">Problem</h4>
<p>You want to test your directive with a unit test. As an example we use a tab component directive implementation which can be easily used in your HTML document.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;tabs&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;pane</code> <code class="na">title=</code><code class="s">&quot;First Tab&quot;</code><code class="nt">&gt;</code>First pane.<code class="nt">&lt;/pane&gt;</code>
<code class="lineno">3</code>   <code class="nt">&lt;pane</code> <code class="na">title=</code><code class="s">&quot;Second Tab&quot;</code><code class="nt">&gt;</code>Second pane.<code class="nt">&lt;/pane&gt;</code>
<code class="lineno">4</code> <code class="nt">&lt;/tabs&gt;</code>
</pre></div>

</div>

<p>The directive implementation is split into the tabs and the pane directive. Let us start with the tabs directive.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> app.directive(&quot;tabs&quot;, function() <code class="err">{</code>
<code class="lineno"> 2</code>   return <code class="err">{</code>
<code class="lineno"> 3</code>     restrict: &quot;E&quot;,
<code class="lineno"> 4</code>     transclude: true,
<code class="lineno"> 5</code>     scope: <code class="err">{</code>},
<code class="lineno"> 6</code>     controller: function(<code class="p">$</code><code class="nv">scope</code>, <code class="p">$</code><code class="nv">element</code>) <code class="err">{</code>
<code class="lineno"> 7</code>       var panes = <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">panes</code> = [];
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code>       <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">select</code> = function(pane) <code class="err">{</code>
<code class="lineno">10</code>         angular.forEach(panes, function(pane) <code class="err">{</code>
<code class="lineno">11</code>           pane.selected = false;
<code class="lineno">12</code>         });
<code class="lineno">13</code>         pane.selected = true;
<code class="lineno">14</code>         console.log(&quot;selected pane: &quot;, pane.title);
<code class="lineno">15</code>       };
<code class="lineno">16</code> 
<code class="lineno">17</code>       this.addPane = function(pane) <code class="err">{</code>
<code class="lineno">18</code>         if (!panes.length) <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">select</code><code class="p">(</code><code class="err">pane</code><code class="p">)</code>;
<code class="lineno">19</code>         panes.push(pane);
<code class="lineno">20</code>       };
<code class="lineno">21</code>     },
<code class="lineno">22</code>     template:
<code class="lineno">23</code>       &#39;<code class="nt">&lt;div</code> <code class="na">class=</code><code class="s">&quot;tabbable&quot;</code><code class="nt">&gt;</code>&#39; +
<code class="lineno">24</code>         &#39;<code class="nt">&lt;ul</code> <code class="na">class=</code><code class="s">&quot;nav nav-tabs&quot;</code><code class="nt">&gt;</code>&#39; +
<code class="lineno">25</code>           &#39;<code class="nt">&lt;li</code> <code class="na">ng-repeat=</code><code class="s">&quot;pane in panes&quot;</code> <code class="na">ng-class=</code><code class="s">&quot;</code><code class="err">{</code><code class="s">active:pane.selected}&quot;</code><code class="nt">&gt;</code>\
<code class="lineno">26</code> &#39;+
<code class="lineno">27</code>             &#39;<code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">&quot;&quot;</code> <code class="na">ng-click=</code><code class="s">&quot;select(pane)&quot;</code><code class="nt">&gt;</code><code class="err">{{</code>pane.title}}<code class="nt">&lt;/a&gt;</code>&#39; +
<code class="lineno">28</code>           &#39;<code class="nt">&lt;/li&gt;</code>&#39; +
<code class="lineno">29</code>         &#39;<code class="nt">&lt;/ul&gt;</code>&#39; +
<code class="lineno">30</code>         &#39;<code class="nt">&lt;div</code> <code class="na">class=</code><code class="s">&quot;tab-content&quot;</code> <code class="err">ng-transclude</code><code class="nt">&gt;&lt;/div&gt;</code>&#39; +
<code class="lineno">31</code>       &#39;<code class="nt">&lt;/div&gt;</code>&#39;,
<code class="lineno">32</code>     replace: true
<code class="lineno">33</code>   };
<code class="lineno">34</code> });
</pre></div>

</div>

<p>It manages a list of <code>panes</code> and the selected state of the <code>panes</code>. The template definition makes use of the selection to change the class and responds on the click event to change the selection.</p>

<p>The <code>pane</code> directive depends on the <code>tabs</code> directive to add itself to it.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="n">app</code><code class="p">.</code><code class="n">directive</code><code class="p">(</code><code class="s">&quot;pane&quot;</code><code class="p">,</code> <code class="n">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno"> 2</code>   <code class="k">return</code> <code class="p">{</code>
<code class="lineno"> 3</code>     <code class="nl">require:</code> <code class="s">&quot;^tabs&quot;</code><code class="p">,</code>
<code class="lineno"> 4</code>     <code class="kr">restrict</code><code class="o">:</code> <code class="s">&quot;E&quot;</code><code class="p">,</code>
<code class="lineno"> 5</code>     <code class="nl">transclude:</code> <code class="n">true</code><code class="p">,</code>
<code class="lineno"> 6</code>     <code class="nl">scope:</code> <code class="p">{</code>
<code class="lineno"> 7</code>       <code class="nl">title:</code> <code class="s">&quot;@&quot;</code>
<code class="lineno"> 8</code>     <code class="p">},</code>
<code class="lineno"> 9</code>     <code class="nl">link:</code> <code class="n">function</code><code class="p">(</code><code class="n">scope</code><code class="p">,</code> <code class="n">element</code><code class="p">,</code> <code class="n">attrs</code><code class="p">,</code> <code class="n">tabsCtrl</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">10</code>       <code class="n">tabsCtrl</code><code class="p">.</code><code class="n">addPane</code><code class="p">(</code><code class="n">scope</code><code class="p">);</code>
<code class="lineno">11</code>     <code class="p">},</code>
<code class="lineno">12</code>     <code class="nl">template:</code> <code class="err">&#39;</code><code class="o">&lt;</code><code class="n">div</code> <code class="n">class</code><code class="o">=</code><code class="s">&quot;tab-pane&quot;</code> <code class="n">ng</code><code class="o">-</code><code class="n">class</code><code class="o">=</code><code class="s">&quot;{active: selected}&quot;</code> <code class="n">ng</code><code class="o">-</code><code class="n">trans</code>\
<code class="lineno">13</code> <code class="n">clude</code><code class="o">&gt;&lt;/</code><code class="n">div</code><code class="o">&gt;</code><code class="err">&#39;</code><code class="p">,</code>
<code class="lineno">14</code>     <code class="nl">replace:</code> <code class="n">true</code>
<code class="lineno">15</code>   <code class="p">};</code>
<code class="lineno">16</code> <code class="p">});</code>
</pre></div>

</div>

<h4 id="solution-17">Solution</h4>
<p>Using the angular-seed in combination with jasmine and jasmine-jquery you can implement a unit test.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> describe(&#39;MyApp Tabs&#39;, function() <code class="err">{</code>
<code class="lineno"> 2</code>   var elm, scope;
<code class="lineno"> 3</code> 
<code class="lineno"> 4</code>   beforeEach(module(&#39;MyApp&#39;));
<code class="lineno"> 5</code> 
<code class="lineno"> 6</code>   beforeEach(inject(function(<code class="p">$</code><code class="nv">rootScope</code>, <code class="p">$</code><code class="nv">compile</code>) <code class="err">{</code>
<code class="lineno"> 7</code>     elm = angular.element(
<code class="lineno"> 8</code>       &#39;<code class="nt">&lt;div&gt;</code>&#39; +
<code class="lineno"> 9</code>         &#39;<code class="nt">&lt;tabs&gt;</code>&#39; +
<code class="lineno">10</code>           &#39;<code class="nt">&lt;pane</code> <code class="na">title=</code><code class="s">&quot;First Tab&quot;</code><code class="nt">&gt;</code>&#39; +
<code class="lineno">11</code>             &#39;First content is <code class="err">{{</code>first}}&#39; +
<code class="lineno">12</code>           &#39;<code class="nt">&lt;/pane&gt;</code>&#39; +
<code class="lineno">13</code>           &#39;<code class="nt">&lt;pane</code> <code class="na">title=</code><code class="s">&quot;Second Tab&quot;</code><code class="nt">&gt;</code>&#39; +
<code class="lineno">14</code>             &#39;Second content is <code class="err">{{</code>second}}&#39; +
<code class="lineno">15</code>           &#39;<code class="nt">&lt;/pane&gt;</code>&#39; +
<code class="lineno">16</code>         &#39;<code class="nt">&lt;/tabs&gt;</code>&#39; +
<code class="lineno">17</code>       &#39;<code class="nt">&lt;/div&gt;</code>&#39;);
<code class="lineno">18</code> 
<code class="lineno">19</code>     scope = <code class="p">$</code><code class="nv">rootScope</code>;
<code class="lineno">20</code>     <code class="p">$</code><code class="nv">compile</code><code class="p">(</code><code class="err">elm</code><code class="p">)(</code><code class="err">scope</code><code class="p">)</code>;
<code class="lineno">21</code>     scope.<code class="p">$</code><code class="nv">digest</code><code class="p">()</code>;
<code class="lineno">22</code>   }));
<code class="lineno">23</code> 
<code class="lineno">24</code>   it(&#39;should create clickable titles&#39;, function() <code class="err">{</code>
<code class="lineno">25</code>     console.log(elm.find(&#39;ul.nav-tabs&#39;));
<code class="lineno">26</code>     var titles = elm.find(&#39;ul.nav-tabs li a&#39;);
<code class="lineno">27</code> 
<code class="lineno">28</code>     expect(titles.length).toBe(2);
<code class="lineno">29</code>     expect(titles.eq(0).text()).toBe(&#39;First Tab&#39;);
<code class="lineno">30</code>     expect(titles.eq(1).text()).toBe(&#39;Second Tab&#39;);
<code class="lineno">31</code>   });
<code class="lineno">32</code> 
<code class="lineno">33</code>   it(&#39;should set active class on title&#39;, function() <code class="err">{</code>
<code class="lineno">34</code>     var titles = elm.find(&#39;ul.nav-tabs li&#39;);
<code class="lineno">35</code> 
<code class="lineno">36</code>     expect(titles.eq(0)).toHaveClass(&#39;active&#39;);
<code class="lineno">37</code>     expect(titles.eq(1)).not.toHaveClass(&#39;active&#39;);
<code class="lineno">38</code>   });
<code class="lineno">39</code> 
<code class="lineno">40</code>   it(&#39;should change active pane when title clicked&#39;, function() <code class="err">{</code>
<code class="lineno">41</code>     var titles = elm.find(&#39;ul.nav-tabs li&#39;);
<code class="lineno">42</code>     var contents = elm.find(&#39;div.tab-content div.tab-pane&#39;);
<code class="lineno">43</code> 
<code class="lineno">44</code>     titles.eq(1).find(&#39;a&#39;).click();
<code class="lineno">45</code> 
<code class="lineno">46</code>     expect(titles.eq(0)).not.toHaveClass(&#39;active&#39;);
<code class="lineno">47</code>     expect(titles.eq(1)).toHaveClass(&#39;active&#39;);
<code class="lineno">48</code> 
<code class="lineno">49</code>     expect(contents.eq(0)).not.toHaveClass(&#39;active&#39;);
<code class="lineno">50</code>     expect(contents.eq(1)).toHaveClass(&#39;active&#39;);
<code class="lineno">51</code>   });
<code class="lineno">52</code> });
</pre></div>

</div>

<h4 id="discussion-17">Discussion</h4>
<p>Combining jasmine with jasmine-jquery gives you useful assertions like <code>toHaveClass</code> and actions like <code>click</code> which are used extensively in the example above.</p>

<p>To prepare the template we use <code>$compile</code> and <code>$digest</code> in the <code>beforeEach</code> function and then access the resulting Angular element in our tests.</p>

<p>The angular-seed project was slightly extended to add jquery and jasmine-jquery to the project.</p>

<p>The example code was extracted from <a href="https://github.com/vojtajina/ng-directive-testing/tree/start">Vojta Jina&rsquo; Github example</a> - the author of the awesome <a href="https://github.com/testacular/testacular">Testacular</a>.</p>

<h2 id="filters">Filters</h2>
<p>Angular Filters are typically used to format expressions in bindings in your template. They transform the input data to a new formatted data type.</p>

<h3 id="formatting-a-string-with-a-currency-filter">Formatting a String With a Currency Filter</h3>

<h4 id="problem-18">Problem</h4>
<p>You want to format the amount with a localized currency label.</p>

<h4 id="solution-18">Solution</h4>
<p>Use the built-in <code>currency</code> filter and make sure you load the corresponding locale file for the users language.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;html&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;head&gt;</code>
<code class="lineno"> 3</code>     <code class="nt">&lt;meta</code> <code class="na">charset=</code><code class="s">&#39;utf-8&#39;</code><code class="nt">&gt;</code>
<code class="lineno"> 4</code>     <code class="nt">&lt;script</code> <code class="na">src=</code><code class="s">&quot;js/angular.js&quot;</code><code class="nt">&gt;&lt;/script&gt;</code>
<code class="lineno"> 5</code>     <code class="nt">&lt;script</code> <code class="na">src=</code><code class="s">&quot;js/angular-locale_de.js&quot;</code><code class="nt">&gt;&lt;/script&gt;</code>
<code class="lineno"> 6</code>   <code class="nt">&lt;/head&gt;</code>
<code class="lineno"> 7</code>   <code class="nt">&lt;body</code> <code class="err">ng-app</code><code class="nt">&gt;</code>
<code class="lineno"> 8</code>     <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">&quot;text&quot;</code> <code class="na">ng-model=</code><code class="s">&quot;amount&quot;</code> <code class="na">placeholder=</code><code class="s">&quot;Enter amount&quot;</code><code class="nt">/&gt;</code>
<code class="lineno"> 9</code>     <code class="nt">&lt;p&gt;</code>Default Currency: {{ amount | currency }}<code class="nt">&lt;/p&gt;</code>
<code class="lineno">10</code>     <code class="nt">&lt;p&gt;</code>Custom Currency: {{ amount | currency: &quot;Euro Ã¢âÂ¬&quot; }}<code class="nt">&lt;/p&gt;</code>
<code class="lineno">11</code>   <code class="nt">&lt;/body&gt;</code>
<code class="lineno">12</code> <code class="nt">&lt;/html&gt;</code>
</pre></div>

</div>

<p>Enter an amount and it will be displayed using Angular&rsquo;s default locale.</p>

<h4 id="discussion-18">Discussion</h4>
<p>In our example we explicitly load the German locale settings and therefore the default formatting will be in German. The english locale is shipped by default, so there&rsquo;s no need to include the angular-locale_en.js file. If you remove the script tag, you will see the formatting change to English instead. This means in order for a localized application to work correctly you need to load the corresponding locale file. All available locale files can be seen on <a href="https://github.com/angular/angular.js/tree/master/src/ngLocale">github</a>.</p>

<h3 id="implementing-a-custom-filter-to-reverse-an-input-string">Implementing a Custom Filter to Reverse an Input String</h3>

<h4 id="problem-19">Problem</h4>
<p>You want to reverse users text input.</p>

<h4 id="solution-19">Solution</h4>
<p>Implement a custom filter which reverses the input.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">&quot;text&quot;</code> <code class="na">ng-model=</code><code class="s">&quot;text&quot;</code> <code class="na">placeholder=</code><code class="s">&quot;Enter text&quot;</code><code class="nt">/&gt;</code>
<code class="lineno"> 3</code>   <code class="nt">&lt;p&gt;</code>Input: {{ text }}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 4</code>   <code class="nt">&lt;p&gt;</code>Filtered input: {{ text | reverse }}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 5</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code> app.filter(&quot;reverse&quot;, function() {
<code class="lineno">10</code>   return function(input) {
<code class="lineno">11</code>     var result = &quot;&quot;;
<code class="lineno">12</code>     input = input || &quot;&quot;;
<code class="lineno">13</code>     for (var i=0; i<code class="nt">&lt;input.length</code><code class="err">;</code> <code class="err">i++)</code> <code class="err">{</code>
<code class="lineno">14</code>       <code class="na">result =</code> <code class="s">input.charAt(i)</code> <code class="err">+</code> <code class="err">result;</code>
<code class="lineno">15</code>     <code class="err">}</code>
<code class="lineno">16</code>     <code class="err">return</code> <code class="err">result;</code>
<code class="lineno">17</code>   <code class="err">};</code>
<code class="lineno">18</code> <code class="err">});</code>
</pre></div>

</div>

<h4 id="discussion-19">Discussion</h4>
<p>Angular&rsquo;s filter function expects a filter name and a function as params. The function must return the actual filter function, where you must implement your business logic. In this example it will only have an <code>input</code> param. The result will be returned after the for loop reversed the input completely.</p>

<h3 id="passing-configuration-params-to-filters">Passing Configuration Params to Filters</h3>

<h4 id="problem-20">Problem</h4>
<p>You want to make your filter customizable by introducing config params.</p>

<h4 id="solution-20">Solution</h4>
<p>Angular filters can be passed a hash of params which can be directly accessed in the filter function.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">&quot;text&quot;</code> <code class="na">ng-model=</code><code class="s">&quot;text&quot;</code> <code class="na">placeholder=</code><code class="s">&quot;Enter text&quot;</code><code class="nt">/&gt;</code>
<code class="lineno"> 3</code>   <code class="nt">&lt;p&gt;</code>Input: {{ text }}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 4</code>   <code class="nt">&lt;p&gt;</code>Filtered input: {{ text | reverse: { suffix: &quot;!&quot;} }}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 5</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code> app.filter(&quot;reverse&quot;, function() {
<code class="lineno">10</code>   return function(input, options) {
<code class="lineno">11</code>     input = input || &quot;&quot;;
<code class="lineno">12</code>     var result = &quot;&quot;;
<code class="lineno">13</code>     var suffix = options[&quot;suffix&quot;] || &quot;&quot;;
<code class="lineno">14</code> 
<code class="lineno">15</code>     for (var i=0; i<code class="nt">&lt;input.length</code><code class="err">;</code> <code class="err">i++)</code> <code class="err">{</code>
<code class="lineno">16</code>       <code class="na">result =</code> <code class="s">input.charAt(i)</code> <code class="err">+</code> <code class="err">result;</code>
<code class="lineno">17</code>     <code class="err">}</code>
<code class="lineno">18</code> 
<code class="lineno">19</code>     <code class="err">if</code> <code class="err">(input.length</code> <code class="nt">&gt;</code> 0) result += suffix;
<code class="lineno">20</code> 
<code class="lineno">21</code>     return result;
<code class="lineno">22</code>   };
<code class="lineno">23</code> });
</pre></div>

</div>

<h4 id="discussion-20">Discussion</h4>
<p>The suffix <code>!</code> is passed as an option to the filter function and is appended to the output.</p>

<h3 id="filtering-a-list-of-dom-nodes">Filtering a List of DOM Nodes</h3>

<h4 id="problem-21">Problem</h4>
<p>You want to filter a list of names.</p>

<h4 id="solution-21">Solution</h4>
<p>Angular filters not only work with Strings as input but also with Arrays.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;ul</code> <code class="na">ng-init=</code><code class="s">&quot;names = [&#39;Peter&#39;, &#39;Anton&#39;, &#39;John&#39;]&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 3</code>     <code class="nt">&lt;li</code> <code class="na">ng-repeat=</code><code class="s">&quot;name in names | exclude:&#39;Peter&#39; &quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 4</code>       <code class="nt">&lt;span&gt;</code>{{name}}<code class="nt">&lt;/span&gt;</code>
<code class="lineno"> 5</code>     <code class="nt">&lt;/li&gt;</code>
<code class="lineno"> 6</code>   <code class="nt">&lt;/ul&gt;</code>
<code class="lineno"> 7</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno">10</code> 
<code class="lineno">11</code> app.filter(&quot;exclude&quot;, function() {
<code class="lineno">12</code>   return function(input, exclude) {
<code class="lineno">13</code>     var result = [];
<code class="lineno">14</code>     for (var i=0; i<code class="nt">&lt;input.length</code><code class="err">;</code> <code class="err">i++)</code> <code class="err">{</code>
<code class="lineno">15</code>       <code class="err">if</code> <code class="err">(input[i]</code> <code class="err">!==</code> <code class="err">exclude)</code> <code class="err">{</code>
<code class="lineno">16</code>         <code class="err">result.push(input[i]);</code>
<code class="lineno">17</code>       <code class="err">}</code>
<code class="lineno">18</code>     <code class="err">}</code>
<code class="lineno">19</code> 
<code class="lineno">20</code>     <code class="err">return</code> <code class="err">result;</code>
<code class="lineno">21</code>   <code class="err">};</code>
<code class="lineno">22</code> <code class="err">});</code>
</pre></div>

</div>

<p>We pass <code>Peter</code> as the single param to the exclude filter.</p>

<h4 id="discussion-21">Discussion</h4>
<p>The filter implemention loops through all names and creates a result array excluding &lsquo;Peter&rsquo;. Note, that the actual syntax of the filter function didn&rsquo;t change at all from our previous example with the String input.</p>

<h3 id="chaining-filters-together">Chaining Filters together</h3>

<h4 id="problem-22">Problem</h4>
<p>You want to combine several filters to a single result</p>

<h4 id="solution-22">Solution</h4>
<p>Filters can be chained using the UNIX-like pipe syntax.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;ul</code> <code class="na">ng-init=</code><code class="s">&quot;names = [&#39;Peter&#39;, &#39;Anton&#39;, &#39;John&#39;]&quot;</code><code class="nt">&gt;</code>
<code class="lineno">3</code>     <code class="nt">&lt;li</code> <code class="na">ng-repeat=</code><code class="s">&quot;name in names | exclude:&#39;Peter&#39; | sortAscending &quot;</code><code class="nt">&gt;</code>
<code class="lineno">4</code>       <code class="nt">&lt;span&gt;</code>{{name}}<code class="nt">&lt;/span&gt;</code>
<code class="lineno">5</code>     <code class="nt">&lt;/li&gt;</code>
<code class="lineno">6</code>   <code class="nt">&lt;/ul&gt;</code>
<code class="lineno">7</code> <code class="nt">&lt;/body&gt;</code>
</pre></div>

</div>

<h4 id="discussion-22">Discussion</h4>
<p>The pipe symbol (<code>|</code>) is used to chain multiple filters together. I leave the implementation of the <code>sortAscending</code> filter as an exercise to the reader.</p>

<h3 id="testing-filters">Testing Filters</h3>

<h4 id="problem-23">Problem</h4>
<p>You want to unit test your new filter. Let us start with an easy filter which renders a checkmark depending on a boolean value.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-init=</code><code class="s">&quot;data = true&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;p&gt;</code>{{ data | checkmark}}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 3</code>   <code class="nt">&lt;p&gt;</code>{{ !data | checkmark}}<code class="nt">&lt;/p&gt;</code>
<code class="lineno"> 4</code>   <code class="nt">&lt;script</code> <code class="na">src=</code><code class="s">&quot;lib/angular/angular.js&quot;</code><code class="nt">&gt;&lt;/script&gt;</code>
<code class="lineno"> 5</code>   <code class="nt">&lt;script</code> <code class="na">src=</code><code class="s">&quot;js/app.js&quot;</code><code class="nt">&gt;&lt;/script&gt;</code>
<code class="lineno"> 6</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 7</code> 
<code class="lineno"> 8</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno"> 9</code> 
<code class="lineno">10</code> app.filter(&#39;checkmark&#39;, function() {
<code class="lineno">11</code>   return function(input) {
<code class="lineno">12</code>     return input ? &#39;\u2713&#39; : &#39;\u2718&#39;;
<code class="lineno">13</code>   };
<code class="lineno">14</code> });
</pre></div>

</div>

<h4 id="solution-23">Solution</h4>
<p>Use the angular-seed project as a bootstrap again.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="n">describe</code><code class="p">(</code><code class="s">&#39;MyApp Tabs&#39;</code><code class="p">,</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno"> 2</code>   <code class="n">beforeEach</code><code class="p">(</code><code class="n">module</code><code class="p">(</code><code class="s">&#39;MyApp&#39;</code><code class="p">));</code>
<code class="lineno"> 3</code> 
<code class="lineno"> 4</code>   <code class="n">describe</code><code class="p">(</code><code class="s">&#39;checkmark&#39;</code><code class="p">,</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno"> 5</code>      <code class="n">it</code><code class="p">(</code><code class="s">&#39;should convert boolean values to unicode checkmark or cross&#39;</code><code class="p">,</code> <code class="n">inje</code><code class="o">\</code>
<code class="lineno"> 6</code> <code class="n">ct</code><code class="p">(</code><code class="k">function</code><code class="p">(</code><code class="n">checkmarkFilter</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 7</code>        <code class="n">expect</code><code class="p">(</code><code class="n">checkmarkFilter</code><code class="p">(</code><code class="n">true</code><code class="p">)).</code><code class="n">toBe</code><code class="p">(</code><code class="s">&#39;\u2713&#39;</code><code class="p">);</code>
<code class="lineno"> 8</code>        <code class="n">expect</code><code class="p">(</code><code class="n">checkmarkFilter</code><code class="p">(</code><code class="n">false</code><code class="p">)).</code><code class="n">toBe</code><code class="p">(</code><code class="s">&#39;\u2718&#39;</code><code class="p">);</code>
<code class="lineno"> 9</code>      <code class="p">}));</code>
<code class="lineno">10</code>    <code class="p">});</code>
<code class="lineno">11</code> <code class="p">});</code>
</pre></div>

</div>

<h4 id="discussion-23">Discussion</h4>
<p>The <code>beforeEach</code> loads the module and the <code>it</code> methods injects the filter function for us. Note, that it has to be called <code>checkmarkFilter</code>, otherwise Angular can&rsquo;t inject our filter function correctly.</p>

<h2 id="consuming-externals-services">Consuming Externals Services</h2>
<p>Angular has built-in support for doing AJAX requests with low- and high-level APIs.</p>

<h3 id="requesting-json-data-with-ajax">Requesting JSON Data with AJAX</h3>

<h4 id="problem-24">Problem</h4>
<p>You want to do an AJAX request to fetch JSON data and render it.</p>

<h4 id="solution-24">Solution</h4>
<p>Implement a controller using <code>$http</code> to fetch the data and store it in the scope.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;div</code> <code class="na">ng-controller=</code><code class="s">&quot;PostsCtrl&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 3</code>     <code class="nt">&lt;ul</code> <code class="na">ng-repeat=</code><code class="s">&quot;post in posts&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 4</code>       <code class="nt">&lt;li&gt;</code><code class="err">{{</code>post.title}}<code class="nt">&lt;/li&gt;</code>
<code class="lineno"> 5</code>     <code class="nt">&lt;/ul&gt;</code>
<code class="lineno"> 6</code>   <code class="nt">&lt;/div&gt;</code>
<code class="lineno"> 7</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code> var app = angular.module(&quot;MyApp&quot;, []);
<code class="lineno">10</code> 
<code class="lineno">11</code> app.controller(&quot;PostsCtrl&quot;, function(<code class="p">$</code><code class="nv">scope</code>, <code class="p">$</code><code class="nv">http</code>) <code class="err">{</code>
<code class="lineno">12</code>   <code class="p">$</code><code class="nv">http</code><code class="p">.</code><code class="nv">get</code><code class="p">(</code><code class="s1">&#39;data/posts.json&#39;</code><code class="p">)</code>.
<code class="lineno">13</code>     success(function(data, status, headers, config) <code class="err">{</code>
<code class="lineno">14</code>       <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">posts</code> = data;
<code class="lineno">15</code>     });
<code class="lineno">16</code> });
</pre></div>

</div>

<h4 id="discussion-24">Discussion</h4>
<p>The controller defines a dependency to the <code>$scope</code> and the <code>$http</code> module. An HTTP get call to the <code>data/posts.json</code> URL is done and on success the JSON data is put in <code>$scope.posts</code>.</p>

<p>You can set custom HTTP headers by using the <code>$http.defaults</code> function:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> $<code class="n">http</code><code class="p">.</code><code class="n">defaults</code><code class="p">.</code><code class="n">headers</code><code class="p">.</code><code class="n">common</code><code class="p">[</code>&quot;<code class="n">X</code><code class="o">-</code><code class="n">Custom</code><code class="o">-</code><code class="n">Header</code>&quot;<code class="p">]</code> <code class="p">=</code> &quot;<code class="n">Angular</code><code class="p">.</code><code class="n">js</code>&quot;
</pre></div>

</div>

<p>The complete example uses the angular-seed project again.</p>

<h3 id="consuming-restful-apis">Consuming RESTful APIs</h3>

<h4 id="problem-25">Problem</h4>
<p>You want to consume a RESTful API.</p>

<h4 id="solution-25">Solution</h4>
<p>Use Angular&rsquo;s high-level <code>$resource</code> module to use RESTful APIs.</p>

<p>Let us start with defining the application module and our <code>Post</code> model:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">var</code> <code class="n">app</code> <code class="p">=</code> <code class="n">angular</code><code class="p">.</code><code class="n">module</code><code class="p">(</code><code class="s">&#39;myApp&#39;</code><code class="p">,</code> <code class="p">[</code><code class="s">&#39;ngResource&#39;</code><code class="p">]);</code>
<code class="lineno">2</code> 
<code class="lineno">3</code> <code class="n">app</code><code class="p">.</code><code class="n">factory</code><code class="p">(</code>&quot;<code class="n">Post</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">(</code>$<code class="n">resource</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">4</code>   <code class="k">return</code> $<code class="n">resource</code><code class="p">(</code>&quot;<code class="o">/</code><code class="n">api</code><code class="o">/</code><code class="n">posts</code><code class="o">/</code><code class="p">:</code><code class="n">id</code>&quot;<code class="p">);</code>
<code class="lineno">5</code> <code class="p">});</code>
</pre></div>

</div>

<p>Now we can use the `$resource$ to retrieve a list of posts:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">app</code><code class="p">.</code><code class="n">controller</code><code class="p">(</code>&quot;<code class="n">PostIndexCtrl</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">(</code>$<code class="n">scope</code><code class="p">,</code> <code class="n">Post</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">2</code>   <code class="n">Post</code><code class="p">.</code><code class="n">query</code><code class="p">(</code><code class="k">function</code><code class="p">(</code><code class="n">data</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">3</code>     $<code class="n">scope</code><code class="p">.</code><code class="n">posts</code> <code class="p">=</code> <code class="n">data</code><code class="p">;</code>
<code class="lineno">4</code>   <code class="p">});</code>
<code class="lineno">5</code> <code class="p">});</code>
</pre></div>

</div>

<p>Or a specific post by <code>id</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">app</code><code class="p">.</code><code class="n">controller</code><code class="p">(</code>&quot;<code class="n">PostShowCtrl</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">(</code>$<code class="n">scope</code><code class="p">,</code> <code class="n">Post</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">2</code>   <code class="n">Post</code><code class="p">.</code><code class="n">get</code><code class="p">({</code> <code class="n">id</code><code class="p">:</code> 1 <code class="p">},</code> <code class="k">function</code><code class="p">(</code><code class="n">data</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">3</code>     $<code class="n">scope</code><code class="p">.</code><code class="n">post</code> <code class="p">=</code> <code class="n">data</code><code class="p">;</code>
<code class="lineno">4</code>   <code class="p">});</code>
<code class="lineno">5</code> <code class="p">});</code>
</pre></div>

</div>

<p>And delete a specific post:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">app</code><code class="p">.</code><code class="n">controller</code><code class="p">(</code>&quot;<code class="n">PostDestroyCtrl</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">(</code>$<code class="n">scope</code><code class="p">,</code> <code class="n">Post</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">2</code>   $<code class="n">scope</code><code class="p">.</code><code class="n">destroy</code> <code class="p">=</code> <code class="k">function</code><code class="p">(</code><code class="n">id</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">3</code>     <code class="n">Post</code><code class="p">.</code><code class="n">delete</code><code class="p">({</code> <code class="n">id</code><code class="p">:</code> <code class="n">id</code> <code class="p">});</code>
<code class="lineno">4</code>   <code class="p">}</code>
<code class="lineno">5</code> <code class="p">});</code>
</pre></div>

</div>

<p>Note, that the Angular <code>ngResource</code> module needs to be separately loaded since it is not included in the base angular.js file:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="o">&lt;</code><code class="n">script</code> <code class="n">src</code><code class="p">=</code>&quot;<code class="n">angular</code><code class="o">-</code><code class="n">resource</code><code class="p">.</code><code class="n">js</code>&quot;<code class="o">&gt;</code>
</pre></div>

</div>

<h4 id="discussion-25">Discussion</h4>
<p>Following some conventions simplifies our code quite a bit. We define the <code>$resource</code> by passing the URL schema only. This gives us a handful of nice methods including query, get, save and remove to work with our resource. In the example above we implement several controllers to cover the various typical use cases.</p>

<p>It is generally a good practice to encapsulate your model and <code>$resource$</code> usage in an Angular <code>service</code> module and inject that in your controller.</p>

<p>What if your response of posts is not an array but a more complex json? This typically results in the following error:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">TypeError</code><code class="o">:</code> <code class="n">Object</code> <code class="err">#</code><code class="o">&lt;</code><code class="n">Resource</code><code class="o">&gt;</code> <code class="n">has</code> <code class="n">no</code> <code class="n">method</code> <code class="s1">&#39;push&#39;</code>
</pre></div>

</div>

<p>Have a look at the following JSON example:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="p">{</code>
<code class="lineno"> 2</code>   &quot;<code class="n">posts</code>&quot;<code class="p">:</code> <code class="p">[</code>
<code class="lineno"> 3</code>     <code class="p">{</code>
<code class="lineno"> 4</code>       &quot;<code class="n">id</code>&quot;    <code class="p">:</code> 1<code class="p">,</code>
<code class="lineno"> 5</code>       &quot;<code class="n">title</code>&quot; <code class="p">:</code> &quot;<code class="n">title</code> 1&quot;
<code class="lineno"> 6</code>     <code class="p">},</code>
<code class="lineno"> 7</code>     <code class="p">{</code>
<code class="lineno"> 8</code>       &quot;<code class="n">id</code>&quot;<code class="p">:</code> 2<code class="p">,</code>
<code class="lineno"> 9</code>       &quot;<code class="n">title</code>&quot; <code class="p">:</code> &quot;<code class="n">title</code> 2&quot;
<code class="lineno">10</code>     <code class="p">}</code>
<code class="lineno">11</code>   <code class="p">]</code>
<code class="lineno">12</code> <code class="p">}</code>
</pre></div>

</div>

<p>In this case you have to change the `$resource$ definition accordingly.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="n">app</code><code class="p">.</code><code class="n">factory</code><code class="p">(</code>&quot;<code class="n">Post</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">(</code>$<code class="n">resource</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 2</code>   <code class="k">return</code> $<code class="n">resource</code><code class="p">(</code>&quot;<code class="o">/</code><code class="n">api</code><code class="o">/</code><code class="n">posts</code><code class="o">/</code><code class="p">:</code><code class="n">id</code>&quot;<code class="p">,</code> <code class="p">{},</code> <code class="p">{</code>
<code class="lineno"> 3</code>     <code class="n">query</code><code class="p">:</code> <code class="p">{</code> <code class="n">method</code><code class="p">:</code> &quot;<code class="n">GET</code>&quot;<code class="p">,</code> <code class="n">isArray</code><code class="p">:</code> <code class="n">false</code> <code class="p">}</code>
<code class="lineno"> 4</code>   <code class="p">});</code>
<code class="lineno"> 5</code> <code class="p">});</code>
<code class="lineno"> 6</code> 
<code class="lineno"> 7</code> <code class="n">app</code><code class="p">.</code><code class="n">controller</code><code class="p">(</code>&quot;<code class="n">PostIndexCtrl</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">(</code>$<code class="n">scope</code><code class="p">,</code> <code class="n">Post</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 8</code>   <code class="n">Post</code><code class="p">.</code><code class="n">query</code><code class="p">(</code><code class="k">function</code><code class="p">(</code><code class="n">data</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 9</code>     $<code class="n">scope</code><code class="p">.</code><code class="n">posts</code> <code class="p">=</code> <code class="n">data</code><code class="p">.</code><code class="n">posts</code><code class="p">;</code>
<code class="lineno">10</code>   <code class="p">});</code>
<code class="lineno">11</code> <code class="p">});</code>
</pre></div>

</div>

<p>Note, that we only change the configuration of the <code>query</code> action to not expecting an array. Then in our controller we can directly access the <code>data.posts</code>.</p>

<p>The complete example code is based on Brian Ford&rsquo;s <a href="https://github.com/btford/angular-express-seed">angular-express-seed</a> and uses the <a href="http://expressjs.com/">Express</a> framework.</p>

<h3 id="consuming-jsonp-apis">Consuming JSONP APIs</h3>

<h4 id="problem-26">Problem</h4>
<p>You want to call a JSONP API.</p>

<h4 id="solution-26">Solution</h4>
<p>Use the <code>$resource</code> and configure it to use JSONP. As an example we will call the Twitter search API here.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="nt">&lt;body</code> <code class="na">ng-app=</code><code class="s">&quot;MyApp&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 2</code>   <code class="nt">&lt;div</code> <code class="na">ng-controller=</code><code class="s">&quot;MyCtrl&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 3</code>     <code class="nt">&lt;input</code> <code class="na">type=</code><code class="s">&quot;text&quot;</code> <code class="na">ng-model=</code><code class="s">&quot;searchTerm&quot;</code> <code class="na">placeholder=</code><code class="s">&quot;Search term&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 4</code>     <code class="nt">&lt;button</code> <code class="na">ng-click=</code><code class="s">&quot;search()&quot;</code><code class="nt">&gt;</code>Search<code class="nt">&lt;/button&gt;</code>
<code class="lineno"> 5</code>     <code class="nt">&lt;ul</code> <code class="na">ng-repeat=</code><code class="s">&quot;tweet in searchResult.results&quot;</code><code class="nt">&gt;</code>
<code class="lineno"> 6</code>       <code class="nt">&lt;li&gt;</code><code class="err">{{</code>tweet.text}}<code class="nt">&lt;/li&gt;</code>
<code class="lineno"> 7</code>     <code class="nt">&lt;/ul&gt;</code>
<code class="lineno"> 8</code>   <code class="nt">&lt;/div&gt;</code>
<code class="lineno"> 9</code> <code class="nt">&lt;/body&gt;</code>
<code class="lineno">10</code> 
<code class="lineno">11</code> var app = angular.module(&quot;MyApp&quot;, [&quot;ngResource&quot;]);
<code class="lineno">12</code> 
<code class="lineno">13</code> function MyCtrl(<code class="p">$</code><code class="nv">scope</code>, <code class="p">$</code><code class="nv">resource</code>) <code class="err">{</code>
<code class="lineno">14</code>   <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">twitterAPI</code> = <code class="p">$</code><code class="nv">resource</code><code class="p">(</code><code class="s2">&quot;http://search.twitter.com/search.json&quot;</code><code class="p">,</code>
<code class="lineno">15</code>     <code class="err">{</code> <code class="err">callback:</code> <code class="s2">&quot;JSON_CALLBACK&quot;</code> <code class="err">}</code><code class="p">,</code>
<code class="lineno">16</code>     <code class="err">{</code> <code class="err">get:</code> <code class="err">{</code> <code class="err">method:</code> <code class="s2">&quot;JSONP&quot;</code> <code class="err">}}</code><code class="p">)</code>;
<code class="lineno">17</code> 
<code class="lineno">18</code>   <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">search</code> = function() <code class="err">{</code>
<code class="lineno">19</code>     <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">searchResult</code> = <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">twitterAPI</code><code class="p">.</code><code class="nv">get</code><code class="p">(</code><code class="err">{</code> <code class="err">q:</code> <code class="p">$</code><code class="nv">scope</code><code class="p">.</code><code class="nv">searchTerm</code> <code class="err">}</code><code class="p">)</code>;
<code class="lineno">20</code>   };
<code class="lineno">21</code> }
</pre></div>

</div>

<h4 id="discussion-26">Discussion</h4>
<p>The <code>$resource</code> definition sets the <code>callback</code> attribute to <code>JSON_CALLBACK</code>, a requirement from Angular. Additionally we overwrite the get method to use <code>JSONP</code>. Now, when calling the API we use the <code>q</code> param to pass the entered <code>searchTerm</code>.</p>

<h3 id="deferred-and-promise">Deferred and Promise</h3>
<p>TODO: Write me!</p>

<h3 id="testing-services">Testing Services</h3>

<h4 id="problem-27">Problem</h4>
<p>You want to unit test your controller and service consuming a JSONP API.</p>

<p>Lets have a look again at our example we want to test:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="n">var</code> <code class="n">app</code> <code class="p">=</code> <code class="n">angular</code><code class="p">.</code><code class="n">module</code><code class="p">(</code>&quot;<code class="n">MyApp</code>&quot;<code class="p">,</code> <code class="p">[</code>&quot;<code class="n">ngResource</code>&quot;<code class="p">]);</code>
<code class="lineno"> 2</code> 
<code class="lineno"> 3</code> <code class="n">app</code><code class="p">.</code><code class="n">factory</code><code class="p">(</code>&quot;<code class="n">TwitterAPI</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">(</code>$<code class="n">resource</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 4</code>   <code class="k">return</code> $<code class="n">resource</code><code class="p">(</code>&quot;<code class="n">http</code><code class="p">:</code><code class="o">//</code><code class="n">search</code><code class="p">.</code><code class="n">twitter</code><code class="p">.</code><code class="n">com</code><code class="o">/</code><code class="n">search</code><code class="p">.</code><code class="n">json</code>&quot;<code class="p">,</code>
<code class="lineno"> 5</code>     <code class="p">{</code> <code class="n">callback</code><code class="p">:</code> &quot;<code class="n">JSON_CALLBACK</code>&quot; <code class="p">},</code>
<code class="lineno"> 6</code>     <code class="p">{</code> <code class="n">get</code><code class="p">:</code> <code class="p">{</code> <code class="n">method</code><code class="p">:</code> &quot;<code class="n">JSONP</code>&quot; <code class="p">}});</code>
<code class="lineno"> 7</code> <code class="p">});</code>
<code class="lineno"> 8</code> 
<code class="lineno"> 9</code> <code class="n">app</code><code class="p">.</code><code class="n">controller</code><code class="p">(</code>&quot;<code class="n">MyCtrl</code>&quot;<code class="p">,</code> <code class="k">function</code><code class="p">(</code>$<code class="n">scope</code><code class="p">,</code> <code class="n">TwitterAPI</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno">10</code>   $<code class="n">scope</code><code class="p">.</code><code class="n">search</code> <code class="p">=</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno">11</code>     $<code class="n">scope</code><code class="p">.</code><code class="n">searchResult</code> <code class="p">=</code> <code class="n">TwitterAPI</code><code class="p">.</code><code class="n">get</code><code class="p">({</code> <code class="n">q</code><code class="p">:</code> $<code class="n">scope</code><code class="p">.</code><code class="n">searchTerm</code> <code class="p">});</code>
<code class="lineno">12</code>   <code class="p">};</code>
<code class="lineno">13</code> <code class="p">});</code>
</pre></div>

</div>

<p>Note, that it slightly changed from the previous recipe as the <code>TwitterAPI</code> is pulled out of the controller and resides in its own service now.</p>

<h4 id="solution-27">Solution</h4>
<p>Use the angular-seed project and the $http_backend mocking service.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="n">describe</code><code class="p">(</code><code class="s">&#39;MyCtrl&#39;</code><code class="p">,</code> <code class="k">function</code><code class="p">(){</code>
<code class="lineno"> 2</code>   <code class="n">var</code> <code class="n">scope</code><code class="p">,</code> <code class="n">ctrl</code><code class="p">,</code> <code class="n">httpBackend</code><code class="p">;</code>
<code class="lineno"> 3</code> 
<code class="lineno"> 4</code>   <code class="n">beforeEach</code><code class="p">(</code><code class="n">module</code><code class="p">(</code>&quot;<code class="n">MyApp</code>&quot;<code class="p">));</code>
<code class="lineno"> 5</code> 
<code class="lineno"> 6</code>   <code class="n">beforeEach</code><code class="p">(</code><code class="n">inject</code><code class="p">(</code><code class="k">function</code><code class="p">(</code>$<code class="n">controller</code><code class="p">,</code> $<code class="n">rootScope</code><code class="p">,</code> <code class="n">TwitterAPI</code><code class="p">,</code> $<code class="n">httpBack</code><code class="o">\</code>
<code class="lineno"> 7</code> <code class="k">end</code><code class="p">)</code> <code class="p">{</code>
<code class="lineno"> 8</code>     <code class="n">httpBackend</code> <code class="p">=</code> $<code class="n">httpBackend</code><code class="p">;</code>
<code class="lineno"> 9</code>     <code class="n">scope</code> <code class="p">=</code> $<code class="n">rootScope</code><code class="p">.</code>$<code class="n">new</code><code class="p">();</code>
<code class="lineno">10</code>     <code class="n">ctrl</code> <code class="p">=</code> $<code class="n">controller</code><code class="p">(</code>&quot;<code class="n">MyCtrl</code>&quot;<code class="p">,</code> <code class="p">{</code> $<code class="n">scope</code><code class="p">:</code> <code class="n">scope</code><code class="p">,</code> <code class="n">TwitterAPI</code><code class="p">:</code> <code class="n">TwitterAPI</code> <code class="p">})</code><code class="o">\</code>
<code class="lineno">11</code> <code class="p">;</code>
<code class="lineno">12</code> 
<code class="lineno">13</code>     <code class="n">var</code> <code class="n">mockData</code> <code class="p">=</code> <code class="p">{</code> <code class="n">key</code><code class="p">:</code> &quot;<code class="n">test</code>&quot; <code class="p">};</code>
<code class="lineno">14</code>     <code class="n">var</code> <code class="n">url</code> <code class="p">=</code> &quot;<code class="n">http</code><code class="p">:</code><code class="o">//</code><code class="n">search</code><code class="p">.</code><code class="n">twitter</code><code class="p">.</code><code class="n">com</code><code class="o">/</code><code class="n">search</code><code class="p">.</code><code class="n">json</code>?<code class="n">callback</code><code class="p">=</code><code class="n">JSON_CALLBACK</code><code class="o">\</code>
<code class="lineno">15</code> <code class="o">&amp;</code><code class="n">q</code><code class="p">=</code><code class="n">angularjs</code>&quot;<code class="p">;</code>
<code class="lineno">16</code>     <code class="n">httpBackend</code><code class="p">.</code><code class="n">whenJSONP</code><code class="p">(</code><code class="n">url</code><code class="p">).</code><code class="n">respond</code><code class="p">(</code><code class="n">mockData</code><code class="p">);</code>
<code class="lineno">17</code>   <code class="p">}));</code>
<code class="lineno">18</code> 
<code class="lineno">19</code>   <code class="n">it</code><code class="p">(</code><code class="s">&#39;should set searchResult on successful search&#39;</code><code class="p">,</code> <code class="k">function</code><code class="p">()</code> <code class="p">{</code>
<code class="lineno">20</code>     <code class="n">scope</code><code class="p">.</code><code class="n">searchTerm</code> <code class="p">=</code> &quot;<code class="n">angularjs</code>&quot;<code class="p">;</code>
<code class="lineno">21</code>     <code class="n">scope</code><code class="p">.</code><code class="n">search</code><code class="p">();</code>
<code class="lineno">22</code>     <code class="n">httpBackend</code><code class="p">.</code><code class="n">flush</code><code class="p">();</code>
<code class="lineno">23</code> 
<code class="lineno">24</code>     <code class="n">expect</code><code class="p">(</code><code class="n">scope</code><code class="p">.</code><code class="n">searchResult</code><code class="p">.</code><code class="n">key</code><code class="p">).</code><code class="n">toBe</code><code class="p">(</code>&quot;<code class="n">test</code>&quot;<code class="p">);</code>
<code class="lineno">25</code>   <code class="p">});</code>
<code class="lineno">26</code> 
<code class="lineno">27</code> <code class="p">});</code>
</pre></div>

</div>

<h4 id="discussion-27">Discussion</h4>
<p>Since we now have a clear separation between the service and the controller, we can simply inject the <code>TwitterAPI</code> in our <code>beforeEach</code> function.</p>

<p>Mocking with the <code>$httpBackend</code> is done as a last step in <code>beforeEach</code>. When a JSONP request happens we respond with <code>mockData</code>. After the <code>search()</code> is triggered we <code>flush()</code> the <code>httpBackend</code> in order to return our <code>mockData</code>.</p>

<p>Have a look at the <a href="http://docs.angularjs.org/api/ngMock.$httpBackend">ngMock.$httpBackend</a> module for more details.</p>

<h2 id="urls-routing-and-partials">URLs, Routing and Partials</h2>

<h3 id="changing-the-browsers-current-url">Changing the Browser&rsquo;s Current URL</h3>

<h3 id="client-side-routing-with-hashbang-urls">Client-Side Routing with Hashbang URLs</h3>

<h3 id="using-regular-urls-with-the-html5-history-api">Using Regular URLs with the HTML5 History API</h3>

<h2 id="using-forms">Using Forms</h2>

<h3 id="implementing-a-basic-form">Implementing a Basic Form</h3>

<h3 id="validating-a-form-model">Validating a Form Model</h3>

<h3 id="displaying-form-validation-errors">Displaying Form Validation Errors</h3>

<h3 id="resetting-a-form-model">Resetting a Form Model</h3>

<h2 id="common-user-interface-patterns">Common User Interface Patterns</h2>

<h3 id="filtering-and-sorting-a-list">Filtering and Sorting a List</h3>

<h3 id="paginating-through-client-side-data">Paginating Through Client-Side Data</h3>

<h3 id="paginating-through-server-side-data">Paginating Through Server-Side Data</h3>

<h3 id="pagination-using-infinite-results">Pagination using Infinite Results</h3>

<h3 id="selectable-list-items">Selectable List Items</h3>

<h3 id="displaying-a-flash-noticefailure-message">Displaying a Flash Notice/Failure Message</h3>

<h3 id="editing-text-in-place-using-html5-contenteditable">Editing Text In-Place using HTML5 ContentEditable</h3>

<h3 id="displaying-a-modal-dialog">Displaying a Modal Dialog</h3>

<h3 id="displaying-a-loading-spinner">Displaying a Loading Spinner</h3>

<h2 id="debugging-and-tooling">Debugging and Tooling</h2>

<h3 id="inspecting-the-scope-using-the-chrome-console">Inspecting the Scope Using the Chrome Console</h3>

<h3 id="debugging-and-profiling-with-the-batarang-chrome-extension">Debugging and Profiling with the Batarang Chrome Extension</h3>

<h3 id="enhancing-developer-workflow-with-yeoman">Enhancing Developer Workflow with Yeoman</h3>

<h2 id="backend-integration">Backend Integration</h2>

<h3 id="rails">Rails</h3>

<h3 id="nodejs">Node.js</h3>

<p>The complete example code is based on Brian Ford&rsquo;s <a href="https://github.com/btford/angular-express-seed">angular-express-seed</a> and uses the <a href="http://expressjs.com/">Express</a> framework.</p>


</div>
<div id="leanpub-toc">
<h2>Table of Contents</h2>
<ol class="toc">
<li class="chapter"><a href="#preface">Preface</a></li>
<li class="section"><a href="#introduction">Introduction</a></li>
<li class="section"><a href="#code-examples">Code Examples</a></li>
<li class="section"><a href="#how-to-contact-me">How to contact me</a></li>
<li class="section"><a href="#acknowledgements">Acknowledgements</a></li>
<li class="chapter"><a href="#an-introduction-to-angularjs">An Introduction to Angular.js</a></li>
<li class="section"><a href="#including-the-angularjs-library-code-in-an-html-page">Including the Angular.js library Code in an HTML page</a></li>
<li class="section"><a href="#binding-a-text-input-to-an-expression">Binding a Text Input to an Expression</a></li>
<li class="section"><a href="#converting-expression-output-with-filters">Converting Expression Output with Filters</a></li>
<li class="section"><a href="#responding-to-click-events-using-controllers">Responding to Click Events using Controllers</a></li>
<li class="section"><a href="#creating-custom-html-elements-with-directives">Creating Custom HTML elements with Directives</a></li>
<li class="chapter"><a href="#controllers">Controllers</a></li>
<li class="section"><a href="#assigning-a-default-value-to-a-model">Assigning a Default Value to a Model</a></li>
<li class="section"><a href="#changing-a-model-value-with-a-controller-function">Changing a Model Value with a Controller Function</a></li>
<li class="section"><a href="#encapsulating-a-model-value-with-a-controller-function">Encapsulating a Model Value with a Controller Function</a></li>
<li class="section"><a href="#responding-to-scope-changes">Responding to Scope Changes</a></li>
<li class="section"><a href="#sharing-code-between-controllers-using-services">Sharing Code Between Controllers using Services</a></li>
<li class="section"><a href="#testing-controllers">Testing Controllers</a></li>
<li class="chapter"><a href="#directives">Directives</a></li>
<li class="section"><a href="#enablingdisabling-dom-elements-conditionally">Enabling/Disabling DOM Elements Conditionally</a></li>
<li class="section"><a href="#changing-the-dom-in-response-to-user-actions">Changing the DOM in Response to User Actions</a></li>
<li class="section"><a href="#rendering-an-html-snippet-in-a-directive">Rendering an HTML Snippet in a Directive</a></li>
<li class="section"><a href="#rendering-a-directives-dom-node-children">Rendering a Directive&#x2019;s DOM Node Children</a></li>
<li class="section"><a href="#passing-configuration-params-using-html-attributes">Passing Configuration Params Using HTML Attributes</a></li>
<li class="section"><a href="#repeatedly-rendering-directives-dom-node-children">Repeatedly Rendering Directive&#x2019;s DOM Node Children</a></li>
<li class="section"><a href="#directive-to-directive-communication">Directive to Directive Communication</a></li>
<li class="section"><a href="#testing-directives">Testing Directives</a></li>
<li class="chapter"><a href="#filters">Filters</a></li>
<li class="section"><a href="#formatting-a-string-with-a-currency-filter">Formatting a String With a Currency Filter</a></li>
<li class="section"><a href="#implementing-a-custom-filter-to-reverse-an-input-string">Implementing a Custom Filter to Reverse an Input String</a></li>
<li class="section"><a href="#passing-configuration-params-to-filters">Passing Configuration Params to Filters</a></li>
<li class="section"><a href="#filtering-a-list-of-dom-nodes">Filtering a List of DOM Nodes</a></li>
<li class="section"><a href="#chaining-filters-together">Chaining Filters together</a></li>
<li class="section"><a href="#testing-filters">Testing Filters</a></li>
<li class="chapter"><a href="#consuming-externals-services">Consuming Externals Services</a></li>
<li class="section"><a href="#requesting-json-data-with-ajax">Requesting JSON Data with AJAX</a></li>
<li class="section"><a href="#consuming-restful-apis">Consuming RESTful APIs</a></li>
<li class="section"><a href="#consuming-jsonp-apis">Consuming JSONP APIs</a></li>
<li class="section"><a href="#deferred-and-promise">Deferred and Promise</a></li>
<li class="section"><a href="#testing-services">Testing Services</a></li>
<li class="chapter"><a href="#urls-routing-and-partials">URLs, Routing and Partials</a></li>
<li class="section"><a href="#changing-the-browsers-current-url">Changing the Browser&#x2019;s Current URL</a></li>
<li class="section"><a href="#client-side-routing-with-hashbang-urls">Client-Side Routing with Hashbang URLs</a></li>
<li class="section"><a href="#using-regular-urls-with-the-html5-history-api">Using Regular URLs with the HTML5 History API</a></li>
<li class="chapter"><a href="#using-forms">Using Forms</a></li>
<li class="section"><a href="#implementing-a-basic-form">Implementing a Basic Form</a></li>
<li class="section"><a href="#validating-a-form-model">Validating a Form Model</a></li>
<li class="section"><a href="#displaying-form-validation-errors">Displaying Form Validation Errors</a></li>
<li class="section"><a href="#resetting-a-form-model">Resetting a Form Model</a></li>
<li class="chapter"><a href="#common-user-interface-patterns">Common User Interface Patterns</a></li>
<li class="section"><a href="#filtering-and-sorting-a-list">Filtering and Sorting a List</a></li>
<li class="section"><a href="#paginating-through-client-side-data">Paginating Through Client-Side Data</a></li>
<li class="section"><a href="#paginating-through-server-side-data">Paginating Through Server-Side Data</a></li>
<li class="section"><a href="#pagination-using-infinite-results">Pagination using Infinite Results</a></li>
<li class="section"><a href="#selectable-list-items">Selectable List Items</a></li>
<li class="section"><a href="#displaying-a-flash-noticefailure-message">Displaying a Flash Notice/Failure Message</a></li>
<li class="section"><a href="#editing-text-in-place-using-html5-contenteditable">Editing Text In-Place using HTML5 ContentEditable</a></li>
<li class="section"><a href="#displaying-a-modal-dialog">Displaying a Modal Dialog</a></li>
<li class="section"><a href="#displaying-a-loading-spinner">Displaying a Loading Spinner</a></li>
<li class="chapter"><a href="#debugging-and-tooling">Debugging and Tooling</a></li>
<li class="section"><a href="#inspecting-the-scope-using-the-chrome-console">Inspecting the Scope Using the Chrome Console</a></li>
<li class="section"><a href="#debugging-and-profiling-with-the-batarang-chrome-extension">Debugging and Profiling with the Batarang Chrome Extension</a></li>
<li class="section"><a href="#enhancing-developer-workflow-with-yeoman">Enhancing Developer Workflow with Yeoman</a></li>
<li class="chapter"><a href="#backend-integration">Backend Integration</a></li>
<li class="section"><a href="#rails">Rails</a></li>
<li class="section"><a href="#nodejs">Node.js</a></li>
</ol>
</div>
</body>
</html>
